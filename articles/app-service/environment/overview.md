---
title: 应用服务环境概述
description: 有关应用服务环境的概述
author: ccompy
ms.assetid: 3d37f007-d6f2-4e47-8e26-b844e47ee919
ms.topic: article
ms.date: 03/02/2021
ms.author: ccompy
ms.custom: seodec18
ms.openlocfilehash: 23b23340550ded3642d19500270f06cfb6faf8cb
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/20/2021
ms.locfileid: "101735091"
---
# <a name="app-service-environment-overview"></a>应用服务环境概述 

> [!NOTE]
> 本文介绍应用服务环境 v3（预览版）
> 

Azure 应用服务环境是一项 Azure 应用服务功能，可提供完全隔离和专用的环境，以便高度安全地运行应用服务应用。 此功能可以托管：

- Windows Web 应用
- Linux Web 应用
- Docker 容器
- 函数

应用服务环境 (ASE) 适用于有以下要求的应用程序工作负荷：

- 大规模。
- 隔离和安全网络访问。
- 高内存利用率。
- 每秒请求数 (RPS) 高。 用户可以在单个 Azure 区域或多个 Azure 区域创建多个 ASE。 鉴于这种灵活性，ASE 非常适合具有高 RPS 需求的水平缩放无状态应用程序。

ASE 仅托管一个客户的应用程序，并在其一个 VNet 中进行托管。 客户可以对入站和出站应用程序网络流量进行精细控制。 应用程序可以通过 VPN 建立到本地公司资源的高速安全连接。

ASEv3 附带有自己的定价层 - 独立 V2。
应用服务环境 v3 提供一个环境来保护网络子网中的应用，并提供你自己的 Azure 应用服务专用部署。
可使用多个 ASE 进行水平缩放。 在 ASE 中运行的应用的访问权限可能受到 Web 应用程序防火墙 (WAF) 等上游设备的管制。 有关详细信息，请参阅 Web 应用程序防火墙 (WAF)。

## <a name="usage-scenarios"></a>使用方案

应用服务环境有许多用例，包括：

- 内部业务线应用程序
- 需要超过 30 个 ASP 实例的应用程序
- 利用单租户系统满足内部合规性或安全性要求
- 网络隔离的应用程序托管
- 多层应用程序

多租户应用服务中的应用可以通过许多网络功能来访问网络隔离的资源，或让其自身变成网络隔离资源。 这些功能在应用程序级别启用。  使用 ASE 时，要使应用位于 VNet 中，无需对其进行其他配置。 可以将应用部署到已在 VNet 中的网络隔离环境。 在 ASE 托管网络隔离应用的基础上，它也是单租户系统。 没有其他客户使用该 ASE。 如果确实需要完整的隔离情景，还可以将 ASE 部署到专用硬件上。 在网络隔离的应用程序托管、单租赁和功能之间 

## <a name="dedicated-environment"></a>专用环境
ASE 专用于单个订阅，总共可以在多个应用服务计划中托管 200 个应用服务计划实例。 “实例”一词是指应用服务计划水平缩放。 每个实例都相当于一个辅助角色。 尽管 ASE 总共可以托管 200 个实例，但单个独立 v2 应用服务计划只能托管 100 个实例。 ASE 可以托管两个应用服务计划（每个计划托管 100 个实例）、200 个单实例应用服务计划，或在这之间的任何计划。

ASE 由前端和辅助角色组成。 前端负责处理 HTTP/HTTPS 终止以及 ASE 中应用请求的自动负载均衡。 前端作为应用服务计划自动添加在 ASE 中，并且可以扩展。

辅助角色是托管客户应用的角色。 辅助角色有 3 种固定大小：

- 两个 vCPU/8 GB RAM
- 四个 vCPU/16 GB RAM
- 八个 vCPU/32 GB RAM

客户无需管理前端和辅助角色。 所有基础结构都可以自动执行操作。 在 ASE 中创建或缩放应用服务计划时，将在适当的情况下添加或删除所需的基础结构。

独立 V2 应用服务计划实例会收取费用。 如果 ASE 中根本没有应用服务计划，将会按拥有一个应用服务计划（其中包含一个实例，两个核心辅助角色）收取费用。

## <a name="virtual-network-support"></a>虚拟网络支持
ASE 功能直接将 Azure 应用服务部署到客户的 Azure 资源管理器虚拟网络。 ASE 始终位于虚拟网络的子网中。 可使用虚拟网络的安全功能为应用控制入站和出站网络通信。

网络安全组将入站网络通信限制为 ASE 所在的子网。 可以在上游设备和服务（例如 WAF 和网络 SaaS 提供程序）后使用 NSG 来运行应用。

应用还经常需要访问公司资源，例如内部数据库和 Web 服务。 如果在包含本地网络的 VPN 连接的虚拟网络中部署 ASE，ASE 中的应用可以访问本地资源。 无论 VPN 是站点到站点 VPN，还是 Azure ExpressRoute VPN，都可以使用此功能。

## <a name="preview"></a>预览
应用服务环境 v3 是公共预览版。  随着预览版的进展将会添加某些功能。 ASEv3 的当前限制包括：

- 无法将应用服务计划缩放到 50 个实例以上
- 无法从专用注册表获取容器
- 当前不受支持的应用服务功能无法应用于客户 VNet
- 没有带可访问 Internet 的终结点的外部部署模型
- 不支持命令行（AZ CLI 和 PowerShell）
- 没有从 ASEv2 到 ASEv3 的升级功能
- 不支持 FTP
- 不支持将某些应用服务功能用于客户 VNet。 备份/还原、应用设置中的 Key Vault 引用、使用专用容器注册表以及将诊断日志记录到存储不能用于服务终结点或专用终结点
    
### <a name="asev3-preview-architecture"></a>ASEv3 预览版体系结构
在 ASEv3 预览版中，ASE 使用专用终结点来支持入站流量。 专用终结点在 GA 中将替换为负载均衡器。 在预览版中，ASE 没有内置支持访问 Internet 的终结点。 可以添加应用程序网关来实现此目的。 ASE 需要两个子网中的资源。  入站流量将流经专用终结点。 可以将专用终结点置于任何子网中，只要其中具有可供专用终结点使用的地址即可。  出站子网必须为空，并且必须委托给 Microsoft.Web/hostingEnvironments。 当 ASE 使用出站子网时，则不能再将其用于任何其他目的。

使用 ASEv3，对于 ASE 子网则没有入站或出站网络要求。 可以通过网络安全组和路由表控制流量，并且它只会影响应用程序流量。 请勿删除与 ASE 关联的专用终结点，因为该操作不能撤消。 用于 ASE 的专用终结点适用于 ASE 中的所有应用。 
