---
title: 如何准备数据以自定义语音的语音服务
titlesuffix: Azure Cognitive Services
description: 使用 Azure 的语音服务创建自己的品牌的自定义语音。 提供 studio 录制和关联的脚本，该服务将生成唯一的语音模型优化为录制语音。 使用此语音合成产品、 工具和应用程序中的语音。
services: cognitive-services
author: erhopf
manager: nitinme
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 05/06/2019
ms.author: erhopf
ms.openlocfilehash: 18e1bb486c47baf7648a74e31451e2db73f72250
ms.sourcegitcommit: f6ba5c5a4b1ec4e35c41a4e799fb669ad5099522
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/06/2019
ms.locfileid: "65156855"
---
# <a name="prepare-data-to-create-a-custom-voice"></a>准备数据以创建自定义语音

如果你已准备好创建你的应用程序的自定义文本到语音转换声音，第一步是收集音频录制和关联的脚本启动语音模型定型。 服务使用此数据创建调整以匹配在录制中的语音的独特声。 已训练语音后，可以开始合成语音应用程序中。

您可以开始少量的数据，以创建概念证明。 但是，您提供更多数据、 自定义语音听起来更加自然。 你可以训练文本到语音转换语音模型之前，您将需要音频录制和关联的文本转录。 在此页上，我们将回顾数据类型、 如何使用它们，以及如何管理每个。

## <a name="data-types"></a>数据类型

语音训练数据集包括音频录制和具有关联转录的文本文件。 每个音频文件应包含单个的查询文本 （单个句子或单个关闭对话框系统），而且是长时间不超过 15 秒。

在某些情况下，你可能没有正确的数据集并将想要测试自定义语音训练的短期或长期，带或不带脚本的可用音频文件。 我们提供的工具 （beta 版本） 可帮助你在音频划分语音样本和准备使用的学习记录[批处理脚本 API](batch-transcription.md)。

此表列出了数据类型和如何每个用于创建自定义文本到语音转换语音模型。

| 数据类型 | 描述 | 使用时机 | 所需的其他服务 | 为模型定型的数量 | Locale(s) |
| --------- | ----------- | ----------- | --------------------------- | ----------------------------- | --------- |
| **单个查询文本 + 匹配的脚本** | 集合 (.zip) 的音频文件 (.wav) 作为单个查询文本。 每个音频文件应为 15 秒或更少字符，格式化脚本 (.txt) 与成对出现。 | 具有匹配的学习记录专业录制 | 准备好进行培训。 | EN-US 和 zh CN 没有硬性要求。 超过 2000 个以上的其他区域设置不同语音样本。 | 所有自定义语音区域设置 |
| **长音频 + 脚本 （beta 版本）** | 与脚本 (.txt) 包含所有语音配对长、 未细分音频文件 （超过 20 秒） 的集合 (.zip)。 | 具有音频文件和匹配的学习记录，但它们不分段到语音样本。 | 分段 （使用批处理脚本）。<br>音频格式转换所需的位置。 | EN-US 和 zh CN 没有硬性要求。 | `en-US` 和 `zh-CN` |
| **仅音频 （beta 版本）** | 音频文件而无需脚本的集合 (.zip)。 | 您只需音频文件可用，而无需学习记录。 | 分段 + 脚本生成 （使用批处理脚本）。<br>音频格式转换所需的位置。| 对于没有硬性要求`en-US`和`zh-CN`。 | `en-US` 和 `zh-CN` |

应按类型到数据集分组并以 zip 文件上传文件。 每个数据集只能包含一种数据类型。

> [!NOTE]
> 允许每个订阅导入的数据集的最大数目是免费的 10 个.zip 文件订阅 (F0) 用户和标准订阅 (S0) 用户的 500。

## <a name="individual-utterances--matching-transcript"></a>单个查询文本 + 匹配的脚本

可以准备单个查询文本和匹配两种方式脚本录制。 可以编写一个脚本，并将其由语音人才读取或使用公开可用的音频和转录为文本。 如果是后一种情况，请编辑音频文件中的不流畅之处，例如“嗯”之类的无意义声音、口吃音、喃喃自语或错读音。

若要生成良好的语音字体，请在一个安静的房间内使用高质量麦克风创建录制。 一致的卷，说到速率，说话音调、 和的富有表现力习惯动作是语音的必不可少的。

> [!TIP]
> 若要创建生产用的语音，建议使用专业录音棚和语音专家。 有关详细信息，请参阅[如何录制自定义语音的语音示例](https://review.docs.microsoft.com/azure/cognitive-services/speech-service/record-custom-voice-samples)。

### <a name="audio-files"></a>音频文件

每个音频文件应包含单个的查询文本 （单个句子或一个打开的对话框系统），小于 15 秒钟。 所有文件都必须位于相同的口述语言。 多语言自定义的文本到语音转换声音不支持，但中文英语双语除外。 每个音频文件必须具有唯一文件名扩展名为.wav 的数值文件名。

准备音频时，请遵循以下准则。

| 属性 | 值 |
| -------- | ----- |
| 文件格式 | RIFF (.wav) 分组到一个.zip 文件 |
| 采样率 | 至少 16,000 Hz |
| 示例格式 | PCM，16 位 |
| 文件名 | 数值，具有.wav 扩展名。 不允许重复的文件名称。 |
| 音频长度 | 短于 15 秒 |
| 存档格式 | .zip |
| 最大存档大小 | 200 MB |

> [!NOTE]
> 使用低于 16,000 Hz 的采样率的.wav 文件将被拒绝。 如果一个.zip 文件包含使用不同抽样率的.wav 文件，只有等于或高于 16,000 Hz 将导入。 门户目前可以导入的 .zip 存档最多只能为 200 MB。 但是，可以上传多个存档。

### <a name="transcripts"></a>脚本

脚本文件是一个纯文本文件。 使用这些准则来准备你个转录。

| 属性 | 值 |
| -------- | ----- |
| 文件格式 | 纯文本 (.txt) |
| 编码格式 | ANSI/ASCII、 UTF-8、 UTF-8-BOM、 UTF-16-LE、 或 UTF-16-BE。 为 ZH-CN，不支持 ANSI/ASCII 和 utf-8 编码。 |
| 每行的话语数 | **一个**-脚本文件的每一行应包含一个跟相应录音的音频文件的名称。 文件名和听录应以制表符 (\t) 分隔。 |
| 文件大小上限 | 50 MB |

下面是脚本的组织方式查询文本的查询文本在一个.txt 文件中的示例：

```
0000000001[tab] This is the waistline, and it's falling.
0000000002[tab] We have trouble scoring.
0000000003[tab] It was Janet Maslin.
```
非常重要的学习记录所对应的音频的 100%准确转录。 脚本中的错误将在定型期间引入质量丢失。

> [!TIP]
> 当构建生产文本到语音转换声音，选择查询文本 （或编写脚本），需要帐户拼音覆盖率和效率。 无法获得所需的结果？ [请与自定义语音](mailto:speechsupport@microsoft.com)团队以查明有关遇到我们的详细信息请参阅。

## <a name="long-audio--transcript-beta"></a>长音频 + 脚本 （beta 版本）

在某些情况下，您可能不具有分段音频现已推出。 通过自定义语音门户可帮助您划分时间的音频文件和创建转录，我们提供服务 （beta 版本）。 请记住，此服务将收取向语音到文本订阅使用情况。

> [!NOTE]
> 长时间音频分段服务将利用语音到文本，它仅支持标准订阅 (S0) 用户的批处理脚本功能。 在处理期间的分段，音频文件和脚本将也会发送到自定义语音服务以优化识别模型，以便为你的数据，可以提高准确性。 在此过程中，将不保留任何数据。 分段完成操作后，分段的语音样本添加和其映射的学习记录将存储于你下载和培训。

### <a name="audio-files"></a>音频文件

在准备进行分段的音频，请遵循以下准则。

| 属性 | 值 |
| -------- | ----- |
| 文件格式 | 使用至少 256 KBps，分组到一个.zip 文件的比特率至少 16 个 khz-16 位在 PCM 或.mp3 的采样速率 RIFF (.wav) |
| 文件名 | ASCII 字符。 在名称中的 Unicode 字符将会失败 (例如，中文字符或类似的符号"-")。 不允许重复的名称。 |
| 音频长度 | 超过 20 秒 |
| 存档格式 | .zip |
| 最大存档大小 | 200 MB |

所有音频文件应分组到一个 zip 文件。 确定以将.wav 文件和.mp3 文件放入一个音频 zip，但没有子文件夹允许将 zip 文件中。 例如，可以上传包含一个名为 kingstory.wav、 45 秒长和另一个名为 queenstory.mp3，200-秒的长时间，而无需任何子文件夹的音频文件的 zip 文件。 在处理后，将为.wav 格式转换所有.mp3 文件。

### <a name="transcripts"></a>脚本

此表中列出的规范，必须准备好的学习记录。 每个音频文件必须与脚本匹配。

| 属性 | 值 |
| -------- | ----- |
| 文件格式 | 纯文本 (.txt) 分组到.zip |
| 文件名 | 使用相同的名称为匹配的音频文件 |
| 编码格式 | UTF-8-物料清单仅 |
| 每行的话语数 | 无限制 |
| 文件大小上限 | 50M |

此数据类型中的所有脚本文件应都分组到一个 zip 文件。 Zip 文件中不允许任何子文件夹。 例如，已包含名为 kingstory.wav' 45 秒长，音频文件的 zip 文件上传和另一个名为 queenstory.mp3，200 秒长时间。 你将需要包含两个脚本、 一个名为 kingstory.txt、 其他一个 queenstory.txt 的另一个 zip 文件上传。 每个纯文本格式文件中将提供完整正确匹配音频录音。

已成功上载你的数据集后，我们将帮助您划分语音样本基于脚本提供的音频文件。 下载数据集，可以检查分段的语音样本和匹配的学习记录。 唯一的 Id 将自动分配给的分段的语音样本。 请务必确保你提供的学习记录是 100%准确。 脚本中的错误可以降低在音频的分段过程的准确性，并进一步在训练阶段的更高版本中引入质量丢失。

## <a name="audio-only-beta"></a>仅音频 （beta 版本）

如果你不具有音频录制转录，使用**仅限音频**选项以将数据上传。 我们的系统可以帮助您划分和转录音频文件。 请注意，此服务将计入你的语音到文本订阅使用情况。

准备音频时，请遵循以下准则。

> [!NOTE]
> 长时间音频分段服务将利用语音到文本，它仅支持标准订阅 (S0) 用户的批处理脚本功能。

| 属性 | 值 |
| -------- | ----- |
| 文件格式 | 使用至少 256 KBps，分组到一个.zip 文件的比特率至少 16 个 khz-16 位在 PCM 或.mp3 的采样速率 RIFF (.wav) |
| 文件名 | ASCII 字符。 在名称中的 Unicode 字符将会失败 (例如，中文字符或类似的符号"-")。 不允许重复的名称。 |
| 音频长度 | 超过 20 秒 |
| 存档格式 | .zip |
| 最大存档大小 | 200 MB |

所有音频文件应分组到一个 zip 文件。 Zip 文件中不允许任何子文件夹。 你的数据集已成功上传后，我们将帮助您基于我们的语音批处理脚本服务的语音样本划分的音频文件。 唯一的 Id 将自动分配给的分段的语音样本。 通过语音识别，将会生成匹配的学习记录。 在处理后，将为.wav 格式转换所有.mp3 文件。 下载数据集，可以检查分段的语音样本和匹配的学习记录。

## <a name="next-steps"></a>后续步骤

- [创建自定义语音](how-to-custom-voice-create-voice.md)
- [指南：记录您的语音示例](record-custom-voice-samples.md)
