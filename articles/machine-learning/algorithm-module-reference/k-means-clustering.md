---
title: K 平均值聚类分析：模块参考
titleSuffix: Azure Machine Learning service
description: 了解如何在 Azure 机器学习服务中使用 K 平均值聚类分析模块来训练聚类分析模型。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: xiaoharper
ms.author: zhanxia
ms.date: 05/06/2019
ROBOTS: NOINDEX
ms.openlocfilehash: 7e9b7c8f2cf86245322679198b84b50d2c5edce8
ms.sourcegitcommit: e6d53649bfb37d01335b6bcfb9de88ac50af23bd
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/09/2019
ms.locfileid: "65464665"
---
# <a name="module-k-means-clustering"></a>模块：K 平均值聚类

本文介绍如何使用*K-means 聚类分析*Azure 机器学习工作室创建未经训练的 K 平均值聚类分析模型中的模块。 
 
K 平均值是一个简单的最广为人知*非监督式*学习算法。 该算法可用于各种机器学习任务，例如： 

* [检测异常数据](https://msdn.microsoft.com/magazine/jj891054.aspx)。
* 聚类分析的文本文档。
* 分析数据集，然后使用其他分类或回归方法。 

若要创建聚类分析模型，您：

* 此模块添加到你的试验。
* 连接的数据集。
* 设置参数，例如群集期望的要在创建群集，使用距离指标和等等的数目。 
  
配置模块超参数后，连接到的未训练的模型[训练聚类分析模型](train-clustering-model.md)。 K 平均值算法是一个非监督式的学习方法，因为标签列是可选的。 

+ 如果你的数据包含一个标签，可以使用的标签值引导，群集的所选内容和优化模型。 

+ 如果你的数据没有标签，该算法将创建表示可能的类别，完全根据数据的群集。  

##  <a name="understand-k-means-clustering"></a>了解 K 平均值聚类分析
 
一般情况下，聚类分析使用迭代技术在数据集中的用例具有相似特征的分类。 这些分组可用于研究数据、 标识数据中的异常并最终进行预测。 聚类分析模型还可以帮助您识别数据集不可能逻辑上得出通过浏览或简单的观察中的关系。 出于这些原因，聚类分析通常用于机器学习任务的早期阶段中浏览数据并发现意外的关联。  
  
 当通过使用 K 平均值方法配置聚类分析模型时，必须指定目标数*k* ，该值指示的数*质心*想在模型中。 质心是代表每个分类的点。 K 平均值算法通过最小化平方群集中和将每个传入的数据点分配给其中一个群集。 
 
当它处理训练数据时，K 平均值算法开始使用一组初始的随机选择的质心。 质心用作起点对于群集，并且它们应用 Lloyd 算法以迭代的方式优化其位置。 K 平均值算法会停止构建和优化聚满足一个或多个这些条件时：  
  
-   质心稳定，这意味着不能再更改各个点的群集分配和算法已收敛于一种解决方案。  
  
-   此算法已运行指定的迭代次数。  
  
 已完成的定型阶段后，使用[将数据分配到群集](assign-data-to-clusters.md)模块以将新的用例分配给其中一个使用 K 平均值算法找到的群集。 通过计算新的用例的每个聚类质心之间的距离执行聚类分配。 每个新的用例分配给具有最接近的质心的群集。  

## <a name="configure-the-k-means-clustering-module"></a>配置 K 平均值聚类分析模块
  
1.  添加**K-means 聚类分析**模块在试验。  
  
2.  若要指定模型定型的方式，请选择**创建训练器模式**选项。  
  
    -   **单一参数**:如果你知道你想要在聚类分析模型中使用的确切参数，您可以提供一组特定的值作为参数。  
  
3.  有关**数量的质心**，键入你想要开始使用的算法的分类数。  
  
     该模型不能保证生成完全此数目的群集。 该算法开始此数量的数据点，循环访问要查找的最佳配置。  
  
4.  属性**初始化**用来指定用于定义初始群集配置的算法。  
  
    -   **第一个 N**:一些初始数据点数目是从数据集选择，并且用作初始平均值。 
    
         此方法也称为*Forgy 方法*。  
  
    -   **随机**:该算法在群集中随机放入一个数据点，然后计算初始平均值作为群集的形心随机分配点。 

         此方法也称为*随机分区*方法。  
  
    -   **K-平均值 + +**:这是初始化群集的默认方法。  
  
         **K-平均值 + +** 算法提议，在 2007 年由 David Arthur 和 Sergei Vassilvitskii 以避免标准 K 平均值算法的不佳聚类分析。 **K-平均值 + +** 通过使用另一种方法选择初始聚类中心改进了标准 K 平均值。  
  
    
5.  有关**随机种子**，可以选择键入要用作群集初始化种子的值。 此值可以具有重大影响群集所选内容上。  
  
6.  有关**指标**，选择要用于衡量群集向量之间或新的数据点和随机选择的质心之间的距离的函数。 Azure 机器学习支持以下群集距离度量值：  
  
    -   **欧几里得**:欧几里得距离通常用于衡量群集散点图 k-means 聚类分析。 此指标是首选，因为它降至最低点和质心之间的平均距离。
  
7.  有关**迭代**，键入该算法应循环访问训练数据之前完成所选内容的质心的次数。  
  
     您可以调整此参数为平衡准确性对训练时间。  
  
8.  有关**分配标签模式**，选择一个选项，指定标签列，如果存在在数据集中，应如何处理。  
  
     由于 K 平均值聚类分析的无人监督的机器学习方法，标签是可选的。 但是，如果你的数据集已有标签列，可以使用这些值来指导如何选择群集，或可以指定这些值被忽略。  
  
    -   **忽略标签列**:标签列中的值将被忽略，而不使用在构建模型。
  
    -   **填充缺失值**:标签列的值用作功能来帮助生成此分类。 如果任何行缺少一个标签，则这被处理使用其他功能。  
  
    -   **从靠近中心覆盖**:标签列的值替换为使用与当前质心最接近的点的标签预测的标签值。  

8.  选择**规范化特征**选项如果想在定型之前的特征进行规范化。
  
     如果应用规范化，在定型之前, 的数据点被规范化为`[0,1]`MinMaxNormalizer 通过。

10. 训练该模型。  
  
    -   如果您设置**创建训练器模式**到**单个参数**，添加标记的数据集，并使用来训练模型[训练聚类分析模型](train-clustering-model.md)模块。  
  
### <a name="results"></a>结果

完成配置和定型模型后，必须可用于生成评分的模型。 但是，有多种方法来训练该模型，并通过多种方式查看和使用结果： 

#### <a name="capture-a-snapshot-of-the-model-in-your-workspace"></a>捕获工作区中的模型的快照

如果您使用了[训练聚类分析模型](train-clustering-model.md)模块：

1. 右键单击**训练聚类分析模型**模块。

2. 选择**Trained 模型**，然后选择**另存为已训练模型**。

已保存的模型表示在保存模型时训练数据。 如果更高版本更新在实验中使用的定型数据，它不会更新已保存的模型。 

#### <a name="see-the-clustering-result-dataset"></a>请参阅聚类分析结果数据集 

如果您使用了[训练聚类分析模型](train-clustering-model.md)模块：

1. 右键单击**训练聚类分析模型**模块。

2. 选择**结果数据集**，然后选择**可视化**。

### <a name="tips-for-generating-the-best-clustering-model"></a>用于生成聚类分析模型的最佳提示  

它已知*种子设定*聚类分析过程中使用的过程，则会对模型产生重大影响。 种子设定意味着到潜在的质心点的初始位置。
 
例如，如果数据集包含许多离群值，并选择离群值的种子分类，没有其他数据点将适合于该群集，而群集可以是单一实例。 也就是说，它可能只有一个点。  
  
您可以避免此问题在两种方法：  
  
-   更改质心数并尝试多个种子值。  
  
-   创建多个模型，不同的度量值或循环访问的详细信息。  
  
一般情况下，使用聚类分析模型，就可能任何给定的配置将导致本地优化的一组分类。 换而言之，模型返回群集的一组适合仅当前数据点并不是可归纳为其他数据。 如果使用不同的初始配置，则 K 平均值方法可能会发现不同，或许是高级配置。 
