---
title: 所有 Azure 安全中心建议的参考表
description: 本文列出了 Azure 安全中心的安全建议，这些建议可帮助保护你的资源。
services: security-center
documentationcenter: na
author: memildin
manager: rkarlin
ms.service: security-center
ms.devlang: na
ms.topic: overview
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 12/21/2020
ms.author: memildin
ms.openlocfilehash: 38d1471cf96f09f51559a28e116a99e1e718f812
ms.sourcegitcommit: d488a97dc11038d9cef77a0235d034677212c8b3
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/21/2020
ms.locfileid: "97709259"
---
# <a name="security-recommendations---a-reference-guide"></a>安全建议 - 参考指南

本文列出了 Azure 安全中心可能会显示的建议。 环境中显示的建议取决于要保护的资源和自定义的配置。

安全中心的建议基于最佳做法给出。 其中一些符合 Azure 安全基准，它是由 Microsoft 创作的特定于 Azure 的准则，适用于基于常见合规框架的安全与合规最佳做法。 [详细了解 Azure 安全基准](../security/benchmarks/introduction.md)。

若要了解如何响应这些建议，请参阅 [Azure 安全中心的修正建议](security-center-remediate-recommendations.md)。

安全分数基于已完成的安全中心建议的数量。 若要确定首先要解决的建议，请查看每个建议的严重级别，及其对安全分数的潜在影响。

>[!TIP]
> 如果建议的描述中显示“无相关策略”，通常是因为该建议依赖于另一个建议及其策略。 例如，建议“应修正 Endpoint Protection 运行状况失败...”依赖于建议“应安装 Endpoint Protection 解决方案...”，后者检查 Endpoint Protection 解决方案是否已安装。 基础建议 *确实* 具有一个策略。 将策略限制为仅限基础建议可简化策略管理。

## <a name="network-recommendations"></a><a name="recs-network"></a>网络建议

| 建议                                                                                           | 说明及相关策略                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 严重性     | 已启用快速修复？（[了解详细信息](security-center-remediate-recommendations.md#quick-fix-remediation)） | 资源类型   |
|----------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------|------------------------------------------------------------------------------------------------------|-----------------|
| **应在面向 Internet 的虚拟机上应用自适应网络强化建议**     | Azure 安全中心已分析下面列出的虚拟机的 Internet 流量通信模式，并确定与它们关联的 NSG 中的现有规则过于宽容，导致潜在攻击面增加。<br>这通常在此 IP 地址不会定期与此资源通信的情况下发生。 或者，该 IP 地址已被安全中心的威胁情报源标记为恶意 IP。<br>（相关策略：应在面向 Internet 的虚拟机上应用自适应网络强化建议） | 高         | N                                                                                                    | 虚拟机 |
| **所有 Internet 流量都应通过所部署的 Azure 防火墙进行路由**                               | Azure 安全中心已确认，你的某些子网未使用下一代防火墙进行保护。 通过使用 Azure 防火墙或受支持的下一代防火墙限制对子网的访问，保护子网免受潜在威胁的危害。<br>（相关策略：[预览] 所有 Internet 流量都应通过所部署的 Azure 防火墙进行路由）                                                                                                                                                                                                                                             | 高         | N                                                                                                    | 子网          |
| **应在与虚拟机关联的网络安全组上限制所有网络端口** | 通过限制现有允许规则的访问来增强面向 Internet 的 VM 的网络安全组。<br>当向 *所有* 源开放任何端口（端口 22、3389、5985、5986、80 和 1443 除外）时，将触发此建议。<br>（相关策略：应在与虚拟机关联的网络安全组上限制所有网络端口）                                                                                                                                                                                                                      | 高         | N                                                                                                    | 虚拟机 |
| **应启用 DDoS 防护标准版**                                                           | 通过启用 DDoS 防护服务标准，保护包含具有公共 IP 的应用程序的虚拟网络。 DDoS 防护可缓解网络容量和协议攻击。<br>（相关策略：应启用 DDoS 防护标准）                                                                                                                                                                                                                                                                                                                                             | 高         | N                                                                                                    | 虚拟网络 |
| **应该只能通过 HTTPS 访问函数应用**                                                    | 为函数应用启用“仅 HTTPS”访问权限。 使用 HTTPS 可确保执行服务器/服务身份验证服务，并保护传输中的数据不受网络层窃听攻击威胁。<br>（相关策略：应只能通过 HTTPS 访问函数应用）                                                                                                                                                                                                                                                                                                                                                            | 中型       | **是**                                                                                                | 函数应用    |
| **面向 Internet 的虚拟机应使用网络安全组进行保护**                    | 启用网络安全组以控制虚拟机的网络访问。<br>（相关策略：面向 Internet 的虚拟机应使用网络安全组进行保护）                                                                                                                                                                                                                                                                                                                                                                                                                 | 高/中 | N                                                                                                    | 虚拟机 |
| **应使用网络安全组来保护非面向 Internet 的虚拟机**                | 使用网络安全组 (NSG) 限制对非面向 Internet 的虚拟机的访问，以此防范它们遭受潜在威胁。<br>NSG 包含访问控制列表 (ACL)，可以分配到 VM 的 NIC 或子网。 ACL 规则允许或拒绝流向已分配资源的流量。<br>（相关策略：应使用网络安全组来保护非面向 Internet 的虚拟机）                                                                                                                                                                                     | 低          | N                                                                                                    | 虚拟机 |
| 应禁用虚拟机上的 IP 转发                                             | 禁用 IP 转发。 当在虚拟机的 NIC 上启用 IP 转发后，该计算机可接收发往其他目标的流量。 极少需要启用 IP 转发（例如，将 VM 用作网络虚拟设备时），因此，此策略应由网络安全团队评审。<br>（相关策略：[预览]：应禁用虚拟机上的 IP 转发）                                                                                                                                                                                         | 中型       | N                                                                                                    | 虚拟机 |
| **应通过即时网络访问控制来保护虚拟机的管理端口**    | 应用恰时 (JIT) 虚拟机 (VM) 访问控制来永久锁定对所选端口的访问，并使经授权的用户能够通过 JIT 将其打开有限的时间量。<br>（相关策略：应通过即时网络访问控制来保护虚拟机的管理端口）                                                                                                                                                                                                                                                                              | 高         | N                                                                                                    | 虚拟机 |
| **应关闭虚拟机上的管理端口**                                           | 强化虚拟机的网络安全组，以限制对管理端口的访问。<br>（相关策略：应关闭虚拟机上的管理端口）                                                                                                                                                                                                                                                                                                                                                                                                                        | 高         | N                                                                                                    | 虚拟机 |
| **虚拟网络应受 Azure 防火墙保护**                                               | 部分虚拟网络不受防火墙保护。 使用 Azure 防火墙限制虚拟网络的访问权限并防止潜在威胁。<br>[详细了解 Azure 防火墙](https://azure.microsoft.com/services/azure-firewall/)。<br>（相关策略：虚拟网络应受 Azure 防火墙保护）                                                                                                                                                                                                                                                                     | 低          | N                                                                                                    | 虚拟网络 |
| **应启用安全传输到存储帐户**                                                | 启用到存储帐户的安全传输。 安全传输选项会强制存储帐户仅接受来自安全连接 (HTTPS) 的请求。 使用 HTTPS 可确保服务器和服务之间的身份验证并保护传输中的数据免受中间人攻击、窃听和会话劫持等网络层攻击。<br>（相关策略：应启用到存储帐户的安全传输）                                                                                                                                                            | 高         | **是**                                                                                                | 存储帐户 |
| **子网应与网络安全组关联**                                           | 启用网络安全组以控制子网中部署的资源的网络访问。<br>（相关策略：子网应与网络安全组关联。<br>默认情况下禁用此策略）                                                                                                                                                                                                                                                                                                                                                                                    | 高/中 | N                                                                                                    | 子网          |
| **只能通过 HTTPS 访问 Web 应用程序**                                                 | 为 Web 应用启用“仅 HTTPS”访问权限。 使用 HTTPS 可确保执行服务器/服务身份验证服务，并保护传输中的数据不受网络层窃听攻击威胁。<br>（相关策略：应只能通过 HTTPS 访问 Web 应用程序）                                                                                                                                                                                                                                                                                                                                                      | 中型       | **是**                                                                                                | Web 应用程序 |
|                                                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |              |                                                                                                      |                 |


## <a name="container-recommendations"></a><a name="recs-containers"></a>容器建议

| 建议                                                                                  | 说明及相关策略                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 严重性 | 已启用快速修复？（[了解详细信息](security-center-remediate-recommendations.md#quick-fix-remediation)） | 资源类型      |
|-------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|------------------------------------------------------------------------------------------------------|--------------------|
| **应启用适用于容器注册表的 Azure Defender**                                   | 若要生成安全的容器化工作负载，请确保它们所基于的映像不存在已知漏洞。 适用于容器注册表的 Azure Defender 会扫描注册表中每个推送的容器映像上是否有安全漏洞，并按映像显示详细的发现结果。<br>重要说明：修正此建议将产生 ACR 注册表保护费用。 如果此订阅中没有任何 ACR 注册表，则不会产生任何费用。 如果以后在此订阅中创建任何 ACR 注册表，它们将自动受到保护，并从该时间点开始计费。<br>（相关策略：[应对 Azure 容器注册表的注册表启用高级威胁防护](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fc25d9a16-bc35-4e15-a7e5-9db606bf9ed4)） | 高     | **是**                                                                                                | 订阅       |
| **应启用 Azure Defender for Kubernetes**                                             | Azure Defender for Kubernetes 为容器化环境提供实时威胁防护，并针对可疑活动生成警报。 可以使用此信息快速补救安全问题，并提高容器的安全性。<br>重要说明：修正此建议将产生 AKS 群集保护费用。 如果此订阅中没有任何 AKS 群集，则不会产生任何费用。 如果以后在此订阅中创建任何 AKS 群集，它们将自动受到保护，并从该时间点开始计费。<br>（相关策略：[应对 Azure Kubernetes 服务的群集启用高级威胁防护](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f523b5cd1-3e23-492f-a539-13118b6d1e3a)）                        | 高     | **是**                                                                                                | 订阅       |
| **应在 Kubernetes 服务上定义经授权的 IP 范围**                               | 通过仅向特定范围内的 IP 地址授予 API 访问权限，来限制对 Kubernetes 服务管理 API 的访问。 建议配置已获授权的 IP 范围，以便只有受允许网络中的应用程序可以访问群集。<br>（相关策略：[预览]：应在 Kubernetes 服务上定义经授权的 IP 范围）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 高     | **是**                                                                                                | Kubernetes 服务 |
| **应在群集上安装并启用适用于 Kubernetes 的 Azure Policy 加载项**         | 适用于 Kubernetes 的 Azure Policy 加载项扩展了 Gatekeeper v3（用于开放策略代理 (OPA) 的准入控制器 Webhook），以集中、一致的方式在群集上应用大规模 automountServiceAccountToken 强制措施和安全措施。 <br>安全中心要求加载项审核并强制实施群集内的安全功能和符合性。 [了解详细信息](../governance/policy/concepts/policy-for-kubernetes.md)。<br>（相关策略：[预览]：应在群集上安装并启用适用于 Kubernetes 的 Azure Policy 加载项）                                                                                                                                                                                                                                                                                                                                                                | 高     | **是**                                                                                                | Kubernetes 服务 |
| **应强制执行容器 CPU 和内存限制**                                          | 强制执行 CPU 和内存限制可阻止资源耗尽攻击（一种拒绝服务攻击形式）。<br>建议为容器设置限制，以确保运行时防止容器使用的资源超过配置的资源限制。<br>（相关策略：[预览]：确保容器 CPU 和内存资源限制不超过 Kubernetes 群集中指定的限制）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 中型   | N                                                                                                    | Kubernetes 服务 |
| **应只从受信任的注册表中部署容器映像**                            | 在 Kubernetes 群集上运行的映像应来自已知和监视的容器映像注册表。<br>受信任的注册表通过限制引入未知漏洞、安全问题和恶意映像的可能性，降低群集暴露风险。<br>（相关策略：[预览]：确保只有允许使用的容器映像才在 Kubernetes 群集中运行）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 高     | N                                                                                                    | Kubernetes 服务 |
| **应避免使用特权提升的容器**                                       | 容器在 Kubernetes 群集中不应将特权提升到根目录。<br>AllowPrivilegeEscalation 属性控制进程是否可以获得比其父进程更多的特权。 <br>（相关策略：[预览]：Kubernetes 群集不得允许容器特权提升）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 中型   | N                                                                                                    | Kubernetes 服务 |
| **应避免使用共享敏感主机命名空间的容器**                              | 为了防止容器外的特权提升，请避免 Pod 访问 Kubernetes 群集中的敏感主机命名空间（主机进程 ID 和主机 IPC）。 <br>（相关策略：[预览]：Kubernetes 群集容器不得共享主机进程 ID 命名空间或主机 IPC 命名空间）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 中   | 否                                                                                                   | Kubernetes 群集 |
| **容器应只侦听允许的端口**                                              | 要减少 Kubernetes 群集的受攻击面，请限制容器对已配置端口的访问权限，从而限制对群集的访问权限。 <br>（相关策略：[预览]：确保容器仅侦听 Kubernetes 群集中允许的端口）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 中型   | N                                                                                                    | Kubernetes 服务 |
| **应强制对容器使用不可变（只读）根文件系统**                     | Kubernetes 群集中的容器应使用只读根文件系统。<br>不可变文件系统将恶意二进制文件添加到路径，可防止容器在运行时更改。<br>（相关策略：[预览]：Kubernetes 群集容器应使用只读根文件系统                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 中型   | N                                                                                                    | Kubernetes 服务 |
| **应强制对容器使用最低权限 Linux 功能**                       | 为了减少容器的攻击面，请限制 Linux 功能，并向容器授予特定特权，而不授予根用户的所有特权。<br>建议先删除所有功能，再添加所需的功能。<br>（相关策略：[预览]：Kubernetes 群集容器只应使用允许的功能）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 中型   | N                                                                                                    | Kubernetes 服务 |
| **应限制替代或禁用容器 AppArmor 配置文件**                 | 在 Kubernetes 集群上运行的容器应仅限使用允许的 AppArmor 配置文件。<br>AppArmor（应用程序防御）是一种 Linux 安全模块，可保护操作系统及其应用程序免受安全威胁。 为使用此模块，系统管理员需要将 AppArmor 安全配置文件与每个程序相关联。 <br>（相关策略：[预览]：Kubernetes 群集容器只应使用允许的 AppArmor 配置文件）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 高     | N                                                                                                    | Kubernetes 服务 |
| **应避免特权容器**                                                     | 要防止主机访问不受限制，请尽可能避免使用特权容器。<br>特权容器具有主机的所有根功能。 它们可用作攻击的入口点，并将恶意代码或恶意软件传播到被攻击的应用程序、主机和网络。 <br>（相关策略：[预览]：不允许 Kubernetes 群集中有特权容器）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 中型   | N                                                                                                    | Kubernetes 服务 |
| **应使用基于角色的访问控制来限制对 Kubernetes 服务群集的访问权限** | 若要提供对用户可执行的操作的粒度筛选，请使用 Azure 基于角色的访问控制 (Azure RBAC) 来管理 Kubernetes 服务群集中的权限并配置相关授权策略。 有关详细信息，请参阅 [Azure 基于角色的访问控制](../aks/concepts-identity.md#azure-role-based-access-control-azure-rbac)。<br>（相关策略：[预览]：应在 Kubernetes 服务上使用 Azure 基于角色的访问控制 (Azure RBAC)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 中型   | N                                                                                                    | Kubernetes 服务 |
| **应避免以根用户身份运行容器**                                           | 在 Kubernetes 群集中应以非根用户身份运行容器。 <br>在容器内以根用户身份运行进程会导致在主机上以根用户身份运行该进程。 <br>如果发生泄漏，攻击者会获得容器中的根权限，任何配置错误都变得更加容易被利用。<br>（相关策略：[预览]：应以非根用户身份运行 Kubernetes 群集容器）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 高     | N                                                                                                    | Kubernetes 服务 |
| **服务应只侦听允许的端口**                                                | 要减少 Kubernetes 群集的受攻击面，请限制服务对已配置端口的访问权限，从而限制对群集的访问权限。 <br>（相关策略：[预览]：确保服务只在 Kubernetes 群集中侦听允许使用的端口）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 中型   | N                                                                                                    | Kubernetes 服务 |
| **Kubernetes 服务应升级到最新的 Kubernetes 版本**                  | 将 Azure Kubernetes Service 群集升级到最新的 Kubernetes 版本，以便从最新的漏洞修补程序中获益。 有关特定 Kubernetes 漏洞的详细信息，请参阅 [Kubernetes CVE](https://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=kubernetes)。<br>（相关策略：[预览]：Kubernetes 服务应升级到不易受攻击的 Kubernetes 版本）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 高     | N                                                                                                    | Kubernetes 服务 |
| **应限制对主机网络和端口的使用**                                     | 限制 Pod 在 Kubernetes 群集中对主机网络和允许的主机端口范围的访问。<br>在启用 hostNetwork 属性的情况下创建的 Pod 将共享该节点的网络空间。 为了避免被泄露的容器侦听网络流量，建议不要将 Pod 置于主机网络上。 如果需要在节点的网络上公开容器端口，并且使用 Kubernetes 服务节点端口不能满足你的需求，另一个可能的做法是在 Pod 规范中为容器指定 hostPort。<br>（相关策略：[预览]：Kubernetes 群集 Pod 只应使用批准的主机网络和端口范围）                                                                                                                                                                                                                                                                                       | 中型   | N                                                                                                    | Kubernetes 服务 |
| **Pod HostPath 卷装载的使用应仅限于已知列表**                    | 为了减少 Kubernetes 群集的受攻击面，请将 Kubernetes 群集中的 Pod HostPath 卷装置限制为已配置的允许主机路径。<br>如果泄漏，应限制容器的容器节点访问。<br>（相关策略：[预览]：Kubernetes 群集 Pod hostPath 卷只应使用允许的主机路径）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 中型   | N                                                                                                    | Kubernetes 服务 |
| 应修正 Azure 容器注册表映像中的漏洞（由 Qualys 提供技术支持） | 容器映像漏洞评估功能会扫描注册表中每个推送的容器映像上的安全漏洞，并按映像显示详细的发现结果。 修复这些漏洞可以极大改善容器的安全状况，并保护其不受攻击影响。<br>（无相关策略）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 高     | N                                                                                                    | 容器注册表 |
|                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |          |                                                                                                      |                    |


## <a name="app-service-recommendations"></a><a name="recs-appservice"></a>应用服务建议

| 建议                                                           | 说明及相关策略                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 严重性 | 已启用快速修复？（[了解详细信息](security-center-remediate-recommendations.md#quick-fix-remediation)） | 资源类型 |
|--------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|------------------------------------------------------------------------------------------------------|---------------|
| **只能通过 HTTPS 访问 API 应用**                         | 仅限通过 HTTPS 访问 API 应用。<br>（相关策略：应只能通过 HTTPS 访问 API 应用）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 中型   | N                                                                                                    | 应用服务   |
| **应启用适用于应用服务的 Azure Defender**                     | 适用于应用服务的 Azure Defender 利用云的规模以及 Azure 作为云提供商的可见性来监视常见的 Web 应用攻击。<br>适用于应用服务的 Azure Defender 可发现针对应用程序的攻击并确定新兴攻击。<br>重要说明：修正此建议将产生应用服务计划保护费用。 如果此订阅中没有任何应用服务计划，则不会产生任何费用。 如果以后在此订阅中创建任何应用服务计划，它们将自动受到保护，并从该时间点开始计费。<br>（相关策略：[应在 Azure 应用服务计划上启用高级威胁防护](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f2913021d-f2fd-4f3d-b958-22354e2bdbcb)） | 高     | **是**                                                                                                | 订阅  |
| **CORS 不应允许所有资源都能访问 API 应用**          | 仅允许所需的域与 API 应用程序交互。 跨源资源共享 (CORS) 不应允许所有域都能访问你的 API 应用程序。<br>（相关策略：CORS 不应允许所有资源都能访问 API 应用）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 低      | **是**                                                                                                | 应用服务   |
| CORS 不应允许所有资源都能访问函数应用     | 仅允许所需的域与函数应用程序交互。 跨源资源共享 (CORS) 不应允许所有域都能访问你的函数应用程序。<br>（相关策略：CORS 不应允许所有资源都能访问函数应用）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 低      | **是**                                                                                                | 应用服务   |
| **CORS 不应允许所有资源都能访问你的 Web 应用程序** | 仅允许所需的域与 Web 应用程序交互。 跨源资源共享 (CORS) 不应允许所有域都能访问你的 Web 应用程序。<br>（相关策略：CORS 不应允许所有资源都能访问 Web 应用程序）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 低      | **是**                                                                                                | 应用服务   |
| **应启用应用程序服务中的诊断日志**                    | 启用日志并将其保留长达一年。 这样便可以在发生安全事件或网络遭泄露时，重新创建活动线索用于调查目的。<br>（相关策略：应启用应用服务的诊断日志）</span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 低      | N                                                                                                    | 应用服务   |
| **应该只能通过 HTTPS 访问函数应用**                    | 为函数应用启用“仅 HTTPS”访问权限。 使用 HTTPS 可确保执行服务器/服务身份验证服务，并保护传输中的数据不受网络层窃听攻击威胁。<br>（相关策略：应只能通过 HTTPS 访问函数应用）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 中型   | **是**                                                                                                | 应用服务   |
| 应为 API 应用禁用远程调试                    | 如果不再需要针对 API 应用的调试，请将其禁用。 远程调试需要在 API 应用上打开入站端口。<br>（相关策略：应为 API 应用禁用远程调试）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 低      | **是**                                                                                                | 应用服务   |
| 应为函数应用禁用远程调试               | 如果不再需要使用函数应用的调试，请将其禁用。 远程调试需要在函数应用上打开入站端口。<br>（相关策略：应为函数应用禁用远程调试）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 低      | **是**                                                                                                | 应用服务   |
| **应禁用 Web 应用程序的远程调试**           | 如果不再需要使用 Web 应用程序的调试，请将其禁用。 远程调试需要在 Web 应用上打开入站端口。<br>（相关策略：应为 Web 应用程序禁用远程调试）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 低      | **是**                                                                                                | 应用服务   |
| **只能通过 HTTPS 访问 Web 应用程序**                 | 为 Web 应用启用“仅 HTTPS”访问权限。 使用 HTTPS 可确保执行服务器/服务身份验证服务，并保护传输中的数据不受网络层窃听攻击威胁。<br>（相关策略：应只能通过 HTTPS 访问 Web 应用程序）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 中型   | **是**                                                                                                | 应用服务   |
| **Web 应用应请求一个用于所有传入请求的 SSL 证书** | 客户端证书允许应用请求传入请求的证书。<br>只有具有有效证书的客户端才能访问该应用。<br>（相关策略：[[预览]：Web 应用应该请求一个用于所有传入请求的 SSL 证书](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f5bb220d9-2698-4ee4-8404-b9c30c9df609)）                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 中   | 否                                                                                                   | 应用服务   |
| **应将 TLS 更新为 API 应用的最新版本**         | 升级到最新的 TLS 版本<br>（相关策略：[[预览]：应将 TLS 更新为 API 应用的最新版本](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f8cb6aa8b-9e41-4f4e-aa25-089a7ac2581e)）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 高     | 否                                                                                                   | 应用服务   |
| **应在应用服务中启用诊断日志**                     | 审核确认已在应用上启用诊断日志。<br>如果发生安全事件或网络遭泄露，这样便可以重新创建活动线索用于调查目的。<br>（相关策略：[[预览]：应在应用服务中启用诊断日志](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fb607c5de-e7d9-4eee-9e5c-83f1bcee4fa0)）                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 中   | 否                                                                                                   | 应用服务   |
| **应在 API 应用中使用托管标识**                      | 若要增强身份验证安全性，请使用托管标识。<br>在 Azure 上，托管标识可为 Azure AD 中的 Azure 资源提供标识并用它来获取 Azure Active Directory (Azure AD) 令牌，从而使开发人员无需管理凭据。<br>（相关策略：[[预览]：应在 API 应用中使用托管标识](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fc4d441f8-f9d9-4a9e-9cef-e82117cb3eef)）                                                                                                                                                                                                                                                                                                                                                      | 中   | 否                                                                                                   | 应用服务   |
| **应将 TLS 更新为 Web 应用的最新版本**         | 升级到最新的 TLS 版本<br>（相关策略：[[预览]：应将 TLS 更新为 Web 应用的最新版本](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ff0e6e85b-9b9f-4a4b-b67b-f730d42f1b0b)）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 高     | 否                                                                                                   | 应用服务   |
| **应将 TLS 更新为函数应用的最新版本**    | 升级到最新的 TLS 版本<br>（相关策略：[[预览]：应将 TLS 更新为函数应用的最新版本](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ff9d614c5-c173-4d56-95a7-b4437057d193)）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 高     | 否                                                                                                   | 应用服务   |
| **应将 PHP 更新为 API 应用的最新版本**         | 我们定期发布适用于 PHP 软件的更高版本来解决安全漏洞或包含更多功能。<br>建议使用 API 应用的最新 PHP 版本，以从最新版本的安全修复（若有）和/或新功能中受益。<br>（相关策略：[[预览]：应将 PHP 更新为 API 应用的最新版本](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f1bc1795e-d44a-4d48-9b3b-6fff0fd5f9ba)）                                                                                                                                                                                                                                                                                                                                              | 中   | 否                                                                                                   | 应用服务   |
| **应将 PHP 更新为 Web 应用的最新版本**         | 我们定期发布适用于 PHP 软件的更高版本来解决安全漏洞或包含更多功能。<br>建议使用 Web 应用的最新 PHP 版本，以从最新版本的安全修复（若有）和/或新功能中受益。<br>（相关策略：[[预览]：应将 PHP 更新为 Web 应用的最新版本](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f7261b898-8a84-4db8-9e04-18527132abb3)）                                                                                                                                                                                                                                                                                                                                              | 中   | 否                                                                                                   | 应用服务   |
| **应将 Java 更新为 Web 应用的最新版本**        | 我们定期发布适用于 Java 软件的更高版本来解决安全漏洞或包含更多功能。<br>建议使用 Web 应用的最新 Java 版本，以从最新版本的安全修复（若有）和/或新功能中受益。<br>（相关策略：[[预览]：应将 Java 更新为 Web 应用的最新版本](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f496223c3-ad65-4ecd-878a-bae78737e9ed)）                                                                                                                                                                                                                                                                                                                                           | 中   | 否                                                                                                   | 应用服务   |
| **应将 Java 更新为函数应用的最新版本**   | 我们定期发布适用于 Java 软件的更高版本来解决安全漏洞或包含更多功能。<br>建议使用函数应用的最新 Java 版本，以从最新版本的安全修复（若有）和/或新功能中受益。<br>（相关策略：[[预览]：应将 Java 更新为函数应用的最新版本](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f9d0b6ea4-93e2-4578-bf2f-6bb17d22b4bc)）                                                                                                                                                                                                                                                                                                                                 | 中   | 否                                                                                                   | 应用服务   |
| **应将 Java 更新为 API 应用的最新版本**        | 我们定期发布适用于 Java 的更高版本来解决安全漏洞或包含更多功能。<br>建议使用 API 应用的最新 Python 版本，以从最新版本的安全修复（若有）和/或新功能中受益。<br>（相关策略：[[预览]：应将 Java 更新为 API 应用的最新版本](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f88999f4c-376a-45c8-bcb3-4058f713cf39)）                                                                                                                                                                                                                                                                                                                                                  | 中   | 否                                                                                                   | 应用服务   |
| **应将 Python 更新为 Web 应用的最新版本**      | 我们定期发布适用于 Python 软件的更高版本来解决安全漏洞或包含更多功能。<br>建议使用 Web 应用的最新 Python 版本，以从最新版本的安全修复（若有）和/或新功能中受益。<br>（相关策略：[[预览]：应将 Python 更新为 Web 应用的最新版本](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f7008174a-fd10-4ef0-817e-fc820a951d73)）                                                                                                                                                                                                                                                                                                                                     | 中   | 否                                                                                                   | 应用服务   |
| **应将 Python 更新为函数应用的最新版本** | 我们定期发布适用于 Python 软件的更高版本来解决安全漏洞或包含更多功能。<br>建议使用函数应用的最新 Python 版本，以从最新版本的安全修复（若有）和/或新功能中受益。<br>（相关策略：[[预览]：应将 Python 更新为函数应用的最新版本](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f7238174a-fd10-4ef0-817e-fc820a951d73)）                                                                                                                                                                                                                                                                                                                           | 中   | 否                                                                                                   | 应用服务   |
| **应将 Python 更新为 API 应用的最新版本**      | 我们定期发布适用于 Python 软件的更高版本来解决安全漏洞或包含更多功能。<br>建议使用 API 应用的最新 Python 版本，以从最新版本的安全修复（若有）和/或新功能中受益。<br>（相关策略：[[预览]：应将 Python 更新为 API 应用的最新版本](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f74c3584d-afae-46f7-a20a-6f8adba71a16)）                                                                                                                                                                                                                                                                                                                                     | 中   | 否                                                                                                   | 应用服务   |
| **应仅在函数应用中要求使用 FTPS**                         | 启用 FTPS 强制以实现增强的安全性<br>（相关策略：[[预览]：应仅在函数应用中要求使用 FTPS](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f399b2637-a50f-4f95-96f8-3a145476eb15)）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 高     | 否                                                                                                   | 应用服务   |
| **应仅在 Web 应用中要求使用 FTPS**                              | 启用 FTPS 强制以实现增强的安全性<br>（相关策略：[[预览]：应仅在 Web 应用中要求使用 FTPS](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f4d24b6d4-5e53-4a4f-a7f4-618fa573ee4b)）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 高     | 否                                                                                                   | 应用服务   |
| **应仅在 API 应用中要求使用 FTPS**                              | 启用 FTPS 强制以实现增强的安全性<br>（相关策略：[[预览]：应仅在 API 应用中要求使用 FTPS](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f9a1b8c48-453a-4044-86c3-d8bfd823e4f5)）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 高     | 否                                                                                                   | 应用服务   |
|                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |          |                                                                                                      |               |


## <a name="compute-and-app-recommendations"></a><a name="recs-computeapp"></a>计算和应用建议

| 建议                                                                                            | 说明及相关策略                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 严重性 | 已启用快速修复？（[了解详细信息](security-center-remediate-recommendations.md#quick-fix-remediation)） | 资源类型                          |
|-----------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|------------------------------------------------------------------------------------------------------|----------------------------------------|
| **应在虚拟机上启用自适应应用程序控制**                                   | 启用应用程序控制，以控制哪些应用程序可在 Azure 中的 VM 上运行。 这有助于强化 VM 防范恶意软件的能力。 安全中心使用机器学习来分析每个 VM 上运行的应用程序，帮助你运用此智能来应用允许规则。 此功能简化了配置和维护应用程序允许规则的过程。<br>（相关策略：应对虚拟机启用自适应应用程序控制）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 高     | N                                                                                                    | 计算机                                |
| **应从事件中心命名空间中删除 RootManageSharedAccessKey 以外的所有授权规则**   | 服务中心客户端不应使用提供对命名空间中所有队列和主题的访问的命名空间级访问策略。 若要符合最低特权安全模型，应在实体级别针对队列和主题创建访问策略，以便仅提供对特定实体的访问。<br>（相关策略：应从事件中心命名空间中删除 RootManageSharedAccessKey 以外的所有授权规则）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 低      | N                                                                                                    | 计算资源（事件中心）          |
| **应从服务总线命名空间中删除 RootManageSharedAccessKey 以外的所有授权规则** | 服务总线客户端不应使用提供对命名空间中所有队列和主题的访问的命名空间级访问策略。 若要符合最低特权安全模型，应在实体级别针对队列和主题创建访问策略，以便仅提供对特定实体的访问。<br>（相关策略：应从服务总线命名空间中删除 RootManageSharedAccessKey 以外的所有授权规则）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 低      | N                                                                                                    | 计算资源（服务总线）        |
| 应定义事件中心实体上的授权规则                                         | 审核事件中心实体的授权规则以授予最低访问权限。<br>（相关策略：应定义事件中心实体上的授权规则）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 低      | N                                                                                                    | 计算资源（事件中心）          |
| **自动化帐户变量应加密**                                                      | 存储敏感数据时，请启用自动化帐户变量资产加密。<br>（相关策略：应对自动化帐户变量启用加密）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 高     | N                                                                                                    | 计算资源（自动化帐户） |
| **应启用适用于服务器的 Azure Defender**                                                          | 适用于服务器的 Azure Defender 可为服务器工作负载提供实时威胁防护，并生成强化建议以及有关可疑活动的警报。<br>可以使用此信息快速补救安全问题，并提高虚拟机的安全性。<br>重要说明：修正此建议将产生虚拟机保护费用。 如果此订阅中没有任何虚拟机，则不会产生任何费用。 如果以后在此订阅中创建任何虚拟机，它们将自动受到保护，并从该时间点开始计费。<br>（相关策略：[应对虚拟机启用高级威胁防护](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f4da35fc9-c9e7-4960-aec9-797fe7d9051d)）                                                                                                        | 高     | **是**                                                                                                | 订阅                           |
| **应启用 Azure 流分析的诊断日志**                                           | 启用日志并将其保留长达一年。 这样便可以在发生安全事件或网络遭泄露时，重新创建活动线索用于调查目的。<br>（相关策略：应启用 Azure 流分析的诊断日志）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 低      | **是**                                                                                                | 计算资源（流分析）   |
| **应启用 Batch 帐户的诊断日志**                                                   | 启用日志并将其保留长达一年。 这样便可以在发生安全事件或网络遭泄露时，重新创建活动线索用于调查目的。<br>（相关策略：应启用 Batch 帐户的诊断日志）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 低      | **是**                                                                                                | 计算资源 (Batch)              |
| **应启用事件中心的诊断日志**                                                        | 启用日志并将其保留长达一年。 这样便可以在发生安全事件或网络遭泄露时，重新创建活动线索用于调查目的。<br>（相关策略：应启用事件中心的诊断日志）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 低      | **是**                                                                                                | 计算资源（事件中心）          |
| **应启用逻辑应用的诊断日志**                                                       | 启用日志并将其保留长达一年。 这样便可以在发生安全事件或网络遭泄露时，重新创建活动线索用于调查目的。<br>（相关策略：应启用逻辑应用的诊断日志）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 低      | **是**                                                                                                | 计算资源（逻辑应用）         |
| **应启用搜索服务的诊断日志**                                                  | 启用日志并将其保留长达一年。 这样便可以在发生安全事件或网络遭泄露时，重新创建活动线索用于调查目的。<br>（相关策略：应启用搜索服务的诊断日志）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 低      | **是**                                                                                                | 计算资源（搜索）             |
| **应启用服务总线的诊断日志**                                                      | 启用日志并将其保留长达一年。 这样便可以在发生安全事件或网络遭泄露时，重新创建活动线索用于调查目的。<br>（相关策略：应启用服务总线的诊断日志）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 低      | **是**                                                                                                | 计算资源（服务总线）        |
| **应在虚拟机上应用磁盘加密**                                                 | 使用适用于 Windows 和 Linux 虚拟机的 Azure 磁盘加密来加密虚拟机磁盘。 Azure 磁盘加密 (ADE) 利用行业标准 Windows 的 BitLocker 功能和 Linux 的 DM-Crypt 功能提供 OS 磁盘和数据磁盘加密，以帮助保护数据，并实现组织在客户 Azure Key Vault 方面作出的安全性与合规性承诺。 当合规性与安全性政策要求使用加密密钥对数据进行端到端加密（包括加密临时磁盘，即本地附加的临时磁盘）时，请使用 Azure 磁盘加密。 或者，系统默认会使用 Azure 存储服务加密对托管磁盘进行静态加密，其中，加密密钥是 Azure 中的 Microsoft 托管密钥。 如果这符合你的合规性与安全性要求，则可以利用默认托管磁盘加密来满足要求。<br>（相关策略：应对虚拟机应用磁盘加密） | 高     | N                                                                                                    | 计算机                                |
| 在虚拟机上启用内置漏洞评估解决方案                             | 安装 Qualys 代理（Azure Defender 随附），以在虚拟机上启用同类最佳的漏洞评估解决方案。<br>（相关策略：[应对虚拟机启用漏洞评估](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2Fproviders%2FMicrosoft.Authorization%2FpolicyDefinitions%2F501541f7-f7e7-4cd6-868c-4190fdad3ac9)）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 中型   | **是**                                                                                                | 计算机                                |
| 应在计算机上解决 Endpoint Protection 运行状况问题                                 | 若要实现全面的安全中心保护，请遵照故障排除指南中的说明，解决计算机上的监视代理问题。<br>（此建议依赖于建议“在计算机上安装 Endpoint Protection 解决方案”和其策略）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 中型   | N                                                                                                    | 计算机                                |
| 应在 Windows 虚拟机上安装来宾配置扩展(预览)               | 安装来宾配置代理以启用计算机内部的审核设置（例如：操作系统的配置、应用程序配置或状态、环境设置）。 安装后，来宾内策略将可用，如“应启用 Windows 攻击防护”。<br>（相关策略：审核必备组件以对 Windows VM 启用来宾配置策略。）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 高     | **是**                                                                                                | 计算机                                |
| 在虚拟机上安装 Endpoint Protection 解决方案                                              | 在虚拟机上安装终结点保护解决方案，以保护其免受威胁和漏洞的侵害。<br>（无相关策略）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 中型   | N                                                                                                    | 计算机                                |
| 在计算机上安装 Endpoint Protection 解决方案                                                 | 在 Windows 和 Linux 计算机上安装 Endpoint Protection 解决方案，以保护其免受威胁和漏洞的侵害。<br>（相关策略：监视 Azure 安全中心 Endpoint Protection 的缺失情况）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 中型   | N                                                                                                    | 计算机                                |
| **应在计算机上解决 Log Analytics 代理运行状况问题**                                 | 安全中心使用 Log Analytics 代理，它之前被称为 Microsoft Monitoring Agent (MMA)。   为了确保成功监视虚拟机，需要确保此代理安装在虚拟机上，并能正确地将安全事件收集到配置的工作区中。 在某些情况下，由于多种原因，代理可能未能正确报告安全事件。 在这些情况下，覆盖范围可能并不全面，因此安全事件无法得到正确处理，进而对受影响 VM 的威胁检测可能无法工作。 查看修正步骤，详细了解如何解决每个问题。<br>（无相关策略 - 依赖于“应在计算机上解决 Log Analytics 代理运行状况问题”）                                                                                                                                                                                                                                                                            | 中型   | N                                                                                                    | 计算机                                |
| Log Analytics 代理应安装在基于 Linux 的 Azure Arc 计算机上(预览)              | 安全中心使用 [Log Analytics 代理](../azure-monitor/platform/log-analytics-agent.md)（也称为 MMA）从 Azure Arc 计算机收集安全事件。<br>（相关策略：[预览]：Log Analytics 代理应安装在 Linux Azure Arc 计算机中）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 高     | **是**                                                                                                | Azure Arc 计算机                      |
| 应在虚拟机上安装 Log Analytics 代理                                      | 安全中心从 Azure 虚拟机 (VM) 收集数据，以监视安全漏洞和威胁。 数据是使用 Log Analytics 代理（以前称为 Microsoft Monitoring Agent，MMA）收集的，它从计算机中读取各种安全相关的配置和事件日志，然后将数据复制到 Log Analytics 工作区以进行分析。<br>如果你的 VM 由 Azure 托管服务（例如 Azure Kubernetes 服务或 Azure Service Fabric）使用，也需要此代理。<br>建议配置自动预配以自动部署代理。<br>如果你选择不使用自动预配，请使用修正步骤中的说明将代理手动部署到 VM。<br>（无相关策略）                                                                                                                                                                                                                                                                   | 高     | **是**                                                                                                | 计算机                                |
| Log Analytics 代理应安装在基于 Windows 的 Azure Arc 计算机上(预览)            | 安全中心使用 [Log Analytics 代理](../azure-monitor/platform/log-analytics-agent.md)（也称为 MMA）从 Azure Arc 计算机收集安全事件。<br>（相关策略：[预览]：Log Analytics 代理应安装在 Windows Azure Arc 计算机中）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 高     | **是**                                                                                                | Azure Arc 计算机                      |
| 应在 Linux 虚拟机上安装网络流量数据收集代理（预览版）         | 安全中心使用 Microsoft Monitoring Dependency Agent 从 Azure 虚拟机收集网络流量数据，以启用高级网络保护功能，例如网络映射上的流量可视化效果、网络强化建议和特定网络威胁。<br>（相关策略：[预览]：应在 Linux 虚拟机上安装网络流量数据收集代理）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 中型   | **是**                                                                                                | 计算机                                |
| 应在 Windows 虚拟机上安装网络流量数据收集代理（预览版）       | 安全中心使用 Microsoft Monitoring Dependency Agent 从 Azure 虚拟机收集网络流量数据，以启用高级网络保护功能，例如网络映射上的流量可视化效果、网络强化建议和特定网络威胁。<br>（相关策略：[预览]：应在 Windows 虚拟机上安装网络流量数据收集代理）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 中型   | **是**                                                                                                | 计算机                                |
| 应为云服务角色更新 OS 版本                                             | 将云服务角色的操作系统(OS)版本更新为适用于 OS 系列的最新版本。<br>（无相关策略）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 高     | N                                                                                                    | 计算机                                |
| 修正虚拟机上发现的漏洞（由 Qualys 提供支持）                          | 监视由 Azure 安全中心的内置漏洞评估解决方案(由 Qualys 提供支持)所发现的虚拟机上的漏洞发现。<br>（相关策略：应对虚拟机启用漏洞评估）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 低      | N                                                                                                    | 计算机                                |
| **Service Fabric 群集应将 ClusterProtectionLevel 属性设置为 EncryptAndSign**         | Service Fabric 使用主要群集证书为节点之间的通信提供三个保护级别（None、Sign 和 EncryptAndSign）。 请设置保护级别，确保节点到节点的所有消息经过加密和数字签名。<br>（相关策略：应将 Service Fabric 中的 ClusterProtectionLevel 属性设置为 EncryptAndSign）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 高     | N                                                                                                    | 计算资源 (Service Fabric)     |
| **Service Fabric 群集应仅使用 Azure Active Directory 进行客户端身份验证**              | 在 Service Fabric 中仅通过 Azure Active Directory 执行客户端身份验证。<br>（相关策略：Service Fabric 群集应仅使用 Azure Active Directory 进行客户端身份验证）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 高     | N                                                                                                    | 计算资源 (Service Fabric)     |
| **应在计算机上安装系统更新**                                                   | 安装缺少的系统安全和关键更新，以保护 Windows 和 Linux 虚拟机与计算机<br>（相关策略：应在计算机上安装系统更新）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 高     | N                                                                                                    | 计算机                                |
| **应将虚拟机迁移到新的 Azure 资源管理器资源**                           | 对虚拟机使用 Azure 资源管理器以提供安全增强功能，例如：更强的访问控制 (Azure RBAC)、更好的审核、基于资源管理器的部署和治理、托管标识访问权限、用于存储机密的密钥保管库的访问权限、基于 Azure AD 的身份验证，以及可实现更轻松安全管理的标记和资源组支持。<br>（相关策略：应将虚拟机迁移到新的 Azure 资源管理器资源）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 低      | N                                                                                                    | 计算机                                |
| **应修正容器安全配置中的漏洞**                             | 修复安装了 Docker 的计算机上安全配置中的漏洞，使它们免受攻击。<br>（相关策略：应修正容器安全配置中的漏洞）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 高     | N                                                                                                    | 计算机                                |
| **应修复计算机上安全配置中的漏洞**                       | 修复计算机上安全配置的漏洞，以保护其免受攻击。<br>（相关策略：应修正计算机上安全配置中的漏洞）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 低      | N                                                                                                    | 计算机                                |
| **应通过漏洞评估解决方案修复漏洞**                           | 会持续评估为其部署了漏洞评估第三方解决方案的虚拟机的应用程序和 OS 漏洞。 只要发现此类漏洞，就会在建议中提供详细信息。<br>（相关策略：应通过漏洞评估解决方案修正漏洞）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 高     | N                                                                                                    | 计算机                                |
| 应在虚拟机上安装漏洞评估解决方案                        | 在虚拟机上安装漏洞评估解决方案<br>（相关策略：应通过漏洞评估解决方案修正漏洞）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 中型   | N                                                                                                    | 计算机                                |
| 应在虚拟机上启用 Windows Defender 攻击防护(预览)                           | Windows Defender 攻击防护采用 Azure Policy 来宾配置代理。 攻击防护服务具有 4 个组件，旨在锁定设备来阻隔各种攻击途径，并阻止恶意软件攻击中常用的行为，同时让企业能够平衡其安全风险和生产力要求（仅限 Windows）。<br>（相关策略：审核未启用 Windows Defender 攻击防护的 Windows VM）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 中型   | N                                                                                                    | 计算机                                |
| 应重启计算机来应用系统更新                                             | 重启计算机以应用系统更新并保护计算机免受漏洞攻击。<br>（无相关策略 - 依赖于“应在计算机上安装系统更新”）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 中型   | N                                                                                                    | 计算机                                |
| **应为虚拟机启用 Azure 备份**                                                   | 使用 Azure 备份来保护 Azure 虚拟机上的数据。<br>Azure 备份是一种 Azure 原生且经济高效的数据保护解决方案。<br>它可创建恢复点，这些恢复点存储在异地冗余的恢复保管库中。<br>从恢复点还原时，可以还原整个 VM，也可以仅还原特定的文件。<br>（相关策略：[[预览]：应为虚拟机启用 Azure 备份](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f013e242c-8828-4970-87b3-ab247555486d)）                                                                                                                                                                                                                                                                                                                                                                                                                                             | 低      | 否                                                                                                   | 虚拟机                        |
|                                                                                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |          |                                                                                                      |                                        |


## <a name="virtual-machine-scale-set-recommendations"></a><a name="recs-vmscalesets"></a>虚拟机规模集建议

| 建议                                                                                        | 说明及相关策略                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 严重性 | 已启用快速修复？（[了解详细信息](security-center-remediate-recommendations.md#quick-fix-remediation)） | 资源类型             |
|-------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|------------------------------------------------------------------------------------------------------|---------------------------|
| **应当启用虚拟机规模集中的诊断日志**                                   | 启用日志并将其保留长达一年的时间。 这样可以重新创建用于调查的活动线索。 这适用于发生安全事件或网络受到危害的情况。<br>（相关策略：应启用虚拟机规模集的诊断日志）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 低      | N                                                                                                    | 虚拟机规模集 |
| 应在虚拟机规模集上修正 Endpoint Protection 运行状况故障            | 修复虚拟机规模集上的 Endpoint Protection 运行状况故障，使其免受威胁和漏洞的侵害。<br>（无相关策略 - 依赖于“应在虚拟机规模集上安装 Endpoint Protection 解决方案”）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 低      | N                                                                                                    | 虚拟机规模集 |
| **应在虚拟机规模集上安装终结点保护解决方案**                    | 在虚拟机规模集上安装 Endpoint Protection 解决方案，使其免受威胁和漏洞的侵害。<br>（相关策略：应在虚拟机规模集上安装 Endpoint Protection 解决方案）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 高     | N                                                                                                    | 虚拟机规模集 |
| 应在虚拟机规模集上安装 Log Analytics 代理                        | 安全中心从 Azure 虚拟机 (VM) 收集数据，以监视安全漏洞和威胁。 数据是使用 Log Analytics 代理（以前称为 Microsoft Monitoring Agent，MMA）收集的，它从计算机中读取各种安全相关的配置和事件日志，然后将数据复制到工作区以进行分析。 如果 VM 由 Azure 托管服务（如 Azure Kubernetes 服务或 Azure Service Fabric）使用，那么也需要执行该过程。<br>无法为 Azure 虚拟机规模集配置代理的自动预配。<br>若要在虚拟机规模集（包括 Azure Kubernetes 服务和 Azure Service Fabric 等 Azure 托管服务使用的规模集）上部署代理，请按照修正步骤中的过程操作。 | 高     | **是**                                                                                                | 虚拟机规模集 |
| **应在虚拟机规模集上安装系统更新**                                  | 安装缺少的系统安全更新和关键更新，保护 Windows 和 Linux 虚拟机规模集。<br>（相关策略：应在虚拟机规模集上安装系统更新）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 高     | N                                                                                                    | 虚拟机规模集 |
| **应修复虚拟机规模集上安全配置中的漏洞** | 修复虚拟机规模集上安全配置中的漏洞，使其免受攻击。 <br>（相关策略：应修正虚拟机规模集上安全配置中的漏洞）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 高     | N                                                                                                    | 虚拟机规模集 |
|                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |          |                                                                                                      |                           |


## <a name="data-and-storage-recommendations"></a><a name="recs-datastorage"></a>数据和存储建议

| 建议                                                                                       | 说明及相关策略                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 严重性 | 已启用快速修复？（[了解详细信息](security-center-remediate-recommendations.md#quick-fix-remediation)） | 资源类型                      |
|------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|------------------------------------------------------------------------------------------------------|------------------------------------|
| 应限制对具有防火墙和虚拟网络配置的存储帐户的访问 | 在存储帐户防火墙设置中审核无限制的网络访问权限。 应该配置网络规则，以便只有来自许可网络的应用程序才能访问存储帐户。 若要允许来自特定 Internet 或本地客户端的连接，可以向来自特定 Azure 虚拟网络或到公共 Internet IP 地址范围的流量授予访问权限。<br>（相关策略：审核对存储帐户的无限制网络访问）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 低      | N                                                                                                    | 存储帐户                    |
| **应启用适用于 Azure SQL 数据库服务器的 Azure Defender**                                  | Azure Defender for SQL 是提供高级 SQL 安全功能的统一包。 它包括以下功能：呈现和缓解潜在数据库漏洞、检测可能指示对数据库产生威胁的异常活动以及发现敏感数据并对其进行分类。 <br>重要说明：修正此建议将产生 Azure SQL Database 服务器保护费用。 如果此订阅中没有任何 Azure SQL Database 服务器，则不会产生任何费用。 如果以后在此订阅中创建任何 Azure SQL Database 服务器，它们将自动受到保护，并从该时间点开始计费。<br>（相关策略：[应在 Azure SQL 数据库服务器上启用高级数据安全](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f7fe3b40f-802b-4cdd-8bd4-fd799c948cc2)） | 高     | **是**                                                                                                | 订阅                       |
| **应启用适用于计算机上的 SQL 服务器的 Azure Defender**                                     | Azure Defender for SQL 是提供高级 SQL 安全功能的统一包。 它包括以下功能：呈现和缓解潜在数据库漏洞、检测可能指示对数据库产生威胁的异常活动以及发现敏感数据并对其进行分类。 <br>重要说明：修正此建议将对计算机上的 SQL Server 产生保护费用。 如果此订阅中没有任何计算机 SQL Server，则不会产生任何费用。 如果以后在此订阅中创建任何计算机上的 SQL Server，它们将自动受到保护，并从该时间点开始计费。<br>（相关策略：[应在计算机的 SQL 服务器上启用高级数据安全](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f6581d072-105e-4418-827f-bd446d56421b)）             | 高     | **是**                                                                                                | 订阅                       |
| **应对托管实例启用 Azure Defender for SQL**                               | Azure Defender for SQL 是提供高级 SQL 安全功能的统一包。 它可呈现和减少潜在数据库漏洞，以及检测可能表明数据库有威胁的异常活动。 Azure Defender for SQL 按<a href='/azure/security-center/security-center-pricing'>定价页面</a>中所示的定价计费。<br>（相关策略：应对 SQL 托管实例启用高级数据安全）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 高     | **是**                                                                                                | SQL                                |
| **应对 SQL 服务器启用 Azure Defender for SQL**                                     | Azure Defender for SQL 是提供高级 SQL 安全功能的统一包。 它可呈现和减少潜在数据库漏洞，以及检测可能表明数据库有威胁的异常活动。 Azure Defender for SQL 按<a href='/azure/security-center/security-center-pricing'>定价页面</a>中所示的定价计费。<br>（相关策略：应对 SQL Server 启用高级数据安全）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 高     | **是**                                                                                                | SQL                                |
| 应该为 SQL 数据库预配 Azure Active Directory 管理员                   | 预配 SQL 数据库的 Azure AD 管理员以启用 Azure AD 身份验证。 使用 Azure AD 身份验证可以简化权限管理，以及集中化数据库用户和其他 Microsoft 服务的标识管理。<br>（相关策略：审核确认已为 SQL Server 预配了 Azure Active Directory 管理员）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 高     | N                                                                                                    | SQL                                |
| 应对 SQL 数据库启用审核                                                       | 对 SQL 数据库启用审核。 <br>（相关策略：应在服务器的高级数据安全设置上启用 SQL 数据库的审核）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 低      | **是**                                                                                                | SQL                                |
| **应启用适用于存储的 Azure Defender**                                                     | 适用于存储的 Azure Defender 会检测访问或恶意利用存储帐户的异常和可能有害的企图。<br>重要说明：修正此建议将产生 Azure 存储帐户保护费用。 如果此订阅中没有任何 Azure 存储帐户，则不会产生任何费用。 如果以后在此订阅中创建任何 Azure 存储帐户，它们将自动受到保护，并从该时间点开始计费。<br>（相关策略：[应对 Azure 存储帐户启用高级威胁防护](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f308fbb08-4ab8-4e67-9b29-592e93fb94fa)）                                                                                                                                                                                                                  | 高     | **是**                                                                                                | 订阅                       |
| **应启用 Azure Data Lake Store 的诊断日志**                                       | 启用日志并将其保留长达一年。 这样便可以在发生安全事件或网络遭泄露时，重新创建活动线索用于调查目的。<br>（相关策略：应启用 Azure Data Lake Store 的诊断日志）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 低      | **是**                                                                                                | Data Lake Store                    |
| **应启用 Data Lake Analytics 的诊断日志**                                         | 启用日志并将其保留长达一年。 这样便可以在发生安全事件或网络遭泄露时，重新创建活动线索用于调查目的。<br>（相关策略：应启用 Data Lake Analytics 的诊断日志）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 低      | **是**                                                                                                | Data Lake Analytics                |
| **只应启用与 Redis 缓存的安全连接**                                    | 仅启用通过 SSL 来与 Azure Redis 缓存建立连接。 使用安全连接可确保服务器和服务之间的身份验证并保护传输中的数据免受中间人攻击、窃听攻击和会话劫持等网络层攻击。<br>（相关策略：应仅启用与 Redis 缓存的安全连接）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 高     | N                                                                                                    | Redis                              |
| **应启用安全传输到存储帐户**                                            | 安全传输选项会强制存储帐户仅接受来自安全连接 (HTTPS) 的请求。 HTTPS 可确保服务器和服务之间的身份验证并保护传输中的数据免受中间人攻击、窃听和会话劫持等网络层攻击。<br>（相关策略：应启用到存储帐户的安全传输）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 高     | N                                                                                                    | 存储帐户                    |
| **应对 SQL 数据库中的敏感数据进行分类**                                        | Azure SQL 数据库的“数据发现和分类”提供了用于发现、标记和保护数据库中的敏感数据并对其进行分类的功能。 数据分类后，可以使用 Azure SQL 数据库审核来审核访问并监视敏感数据。 Azure SQL 数据库还启用了高级威胁防护功能，这些功能基于对敏感数据的访问模式的改变创建智能警报。<br>（相关策略：[预览]：应对 SQL 数据库中的敏感数据进行分类）                                                                                                                                                                                                                                                                                                                                                                                                                                          | 高     | N                                                                                                    | SQL                                |
| **应禁止存储帐户公共访问**                                               | 对 Azure 存储中的容器和 blob 进行匿名公共读取访问虽然是共享数据的一种简便方法，但可能会带来安全风险。 为了防止不希望的匿名访问导致数据泄露，Microsoft 建议禁止对存储帐户的公共访问，除非你的方案需要。<br>（相关策略：应禁止存储帐户公共访问）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 中   | Y                                                                                                    | 存储帐户                    |
| **存储帐户应迁移到新的 Azure 资源管理器资源**                      | 为存储帐户使用新的 Azure 资源管理器以提供安全增强功能，例如：更强的访问控制 (Azure RBAC)、更好地审核、基于资源管理器的部署和治理、托管标识访问权限、用于提供机密的 Key Vault 的访问权限、基于 Azure AD 的身份验证，以及可实现更轻松安全管理的标记和资源组支持。<br>（相关策略：应将存储帐户迁移到新的 Azure 资源管理器资源）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 低      | N                                                                                                    | 存储帐户                    |
| **应在 SQL 数据库上启用透明数据加密**                                   | 启用透明数据加密以保护静态数据并满足合规性要求。<br>（相关策略：应对 SQL 数据库启用透明数据加密）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 低      | **是**                                                                                                | SQL                                |
| 应修正关于 SQL 数据库的漏洞评估结果                     | SQL 漏洞评估会扫描数据库中的安全漏洞，并显示与最佳实践之间的任何偏差，如配置错误、权限过多和敏感数据未受保护。 解决发现的漏洞可以极大地改善数据库安全态势。<br>（相关策略：应修正 SQL 数据库中的漏洞）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 高     | N                                                                                                    | SQL                                |
| 应修正关于计算机上 SQL Server 的漏洞评估结果(预览) | SQL 漏洞评估会扫描数据库中的安全漏洞，并显示与最佳实践之间的任何偏差，如配置错误、权限过多和敏感数据未受保护。 解决发现的漏洞可以极大地改善数据库安全态势。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 高     | N                                                                                                    | SQL                                |
| 应对 SQL 数据库启用漏洞评估                                       | 漏洞评估可发现、跟踪和帮助你修正潜在数据库漏洞。<br>（相关策略：应对 SQL Server 启用漏洞评估）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 高     | **是**                                                                                                | SQL                                |
| **应在 SQL 托管实例上启用漏洞评估**                               | 漏洞评估可发现、跟踪和帮助你修正潜在数据库漏洞。<br>（相关策略：应对 SQL 托管实例启用漏洞评估）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 高     | **是**                                                                                                | SQL                                |
| **应为 Azure Database for MariaDB 启用异地冗余备份**                            | 通过 Azure Database for MariaDB，你可以为数据库服务器选择冗余选项。<br>它可设置为异地冗余备份存储，其中数据不仅存储在托管服务器的区域内，还可复制到配对区域，以在发生区域故障时提供恢复选项。<br>只能在创建服务器时为备份配置异地冗余存储。<br>（相关策略：[[预览]：应为 Azure Database for MariaDB 启用异地冗余备份](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f0ec47710-77ff-4a3d-9181-6aa50af424d0)）                                                                                                                                                                                                                                                              | 低      | 否                                                                                                   | Azure Database for MariaDB 服务器 |
| **应为 Azure Database for PostgreSQL 启用异地冗余备份**                         | 通过 Azure Database for PostgreSQL，你可以为数据库服务器选择冗余选项。<br>它可设置为异地冗余备份存储，其中数据不仅存储在托管服务器的区域内，还可复制到配对区域，以在发生区域故障时提供恢复选项。<br>只能在创建服务器时为备份配置异地冗余存储。<br>（相关策略：[[预览]：应为 Azure Database for PostgreSQL 启用异地冗余备份](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f48af4db5-9b8b-401c-8e74-076be876a430)）                                                                                                                                                                                                                                                        | 低      | 否                                                                                                   | Azure Database for PostgreSQL      |
| **应为 Azure Database for MySQL 启用异地冗余备份**                              | 通过 Azure Database for MySQL，你可以为数据库服务器选择冗余选项。<br>它可设置为异地冗余备份存储，其中数据不仅存储在托管服务器的区域内，还可复制到配对区域，以在发生区域故障时提供恢复选项。<br>只能在创建服务器时为备份配置异地冗余存储。<br>（相关策略：[[预览]：应为 Azure Database for MySQL 启用异地冗余备份](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f82339799-d096-41ae-8538-b108becf0970)）                                                                                                                                                                                                                                                                  | 低      | 否                                                                                                   | Azure Database for MySQL           |
| **应为 PostgreSQL 数据库服务器启用“强制 SSL 连接”**                         | Azure Database for MySQL 支持使用安全套接字层 (SSL) 将 Azure Database for MySQL 服务器连接到客户端应用程序。<br>通过在数据库服务器与客户端应用程序之间强制实施 SSL 连接，可以加密服务器与应用程序之间的数据流，有助于防止“中间人”攻击。<br>此配置强制始终启用 SSL 以访问数据库服务器。<br>（相关策略：[[预览]：应为 PostgreSQL 数据库服务器启用“强制 SSL 连接”](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fd158790f-bfb0-486c-8631-2dc6b4e8e6af)）                                                                                                                                                                                                                             | 中   | 否                                                                                                   | PostgreSQL 数据库服务器        |
| **应为 MySQL 数据库服务器启用“强制 SSL 连接”**                              | Azure Database for MySQL 支持使用安全套接字层 (SSL) 将 Azure Database for MySQL 服务器连接到客户端应用程序。<br>通过在数据库服务器与客户端应用程序之间强制实施 SSL 连接，可以加密服务器与应用程序之间的数据流，有助于防止“中间人”攻击。<br>此配置强制始终启用 SSL 以访问数据库服务器。<br>（相关策略：[[预览]：应为 MySQL 数据库服务器启用“强制 SSL 连接”](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fe802a67a-daf5-4436-9ea6-f6d821dd0c5d)）                                                                                                                                                                                                                                            | 中   | 否                                                                                                   | MySQL 数据库服务器             |
| **应为 PostgreSQL 服务器启用专用终结点**                                        | 专用终结点连接通过启用到 Azure Database for PostgreSQL 的专用连接来加强安全通信。<br>配置专用终结点连接，以启用对仅来自已知网络的流量的访问，并防止访问所有其他 IP 地址，包括 Azure 内的地址。<br>（相关策略：[[预览]：应为 PostgreSQL 服务器启用专用终结点](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f0564d078-92f5-4f97-8398-b9f58a51f70b)）                                                                                                                                                                                                                                                                                                                                                                                                   | 中   | 否                                                                                                   | PostgreSQL 服务器                 |
| **应为 MariaDB 服务器启用专用终结点**                                           | 专用终结点连接通过启用到 Azure Database for MariaDB 的专用连接来加强安全通信。<br>配置专用终结点连接，以启用对仅来自已知网络的流量的访问，并防止访问所有其他 IP 地址，包括 Azure 内的地址。<br>（相关策略：[[预览]：应为 MariaDB 服务器启用专用终结点](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f0a1302fb-a631-4106-9753-f3d494733990)）                                                                                                                                                                                                                                                                                                                                                                                                         | 中   | 否                                                                                                   | Azure Database for MariaDB 服务器 |
| **应为 MySQL 服务器启用专用终结点**                                             | 专用终结点连接通过启用到 Azure Database for MySQL 的专用连接来加强安全通信。<br>配置专用终结点连接，以启用对仅来自已知网络的流量的访问，并防止访问所有其他 IP 地址，包括 Azure 内的地址。<br>（相关策略：[[预览]：应为 MySQL 服务器启用专用终结点](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f7595c971-233d-4bcf-bd18-596129188c49)）                                                                                                                                                                                                                                                                                                                                                                                                             | 中   | 否                                                                                                   | Azure Database for MySQL           |
| **应将 SQL Server 的审核保留设置为至少 90 天**                                | 审核配置的审核保持期少于 90 天的 SQL 服务器。<br>（相关策略：[[预览]：应将 SQL Server 的审核保留设置为至少 90 天](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f89099bee-89e0-4b26-a5f4-165451757743)）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 低      | 否                                                                                                   | SQL                                |
|                                                                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |          |                                                                                                      |                                    |


## <a name="identity-and-access-recommendations"></a><a name="recs-identity"></a>标识和访问建议

| 建议                                                                                         | 说明及相关策略                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 严重性 | 已启用快速修复？（[了解详细信息](security-center-remediate-recommendations.md#quick-fix-remediation)） | 资源类型 |
|--------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|------------------------------------------------------------------------------------------------------|---------------|
| **只多只为订阅指定 3 个所有者**                                   | 指定少于 3 个订阅所有者，以减少已遭入侵的所有者做出违规行为的可能性。<br>（相关策略：最多只能为订阅指定 3 个所有者）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 高     | N                                                                                                    | 订阅  |
| **应启用 Azure Defender for Key Vault**                                                     | Azure 安全中心包含 Azure Defender for Key Vault，它提供额外的安全情报层。 Azure Defender for Key Vault 会检测访问或恶意利用 Key Vault 帐户的异常和可能有害的企图。<br>重要说明：修正此建议将产生 AKV 保管库保护费用。 如果此订阅中没有任何 AKV 保管库，则不会产生任何费用。 如果以后在此订阅中创建任何 AKV 保管库，它们将自动受到保护，并从该时间点开始计费。<br>（相关策略：[应对 Azure Key Vault 的保管库启用高级威胁防护](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f0e6763cc-5078-4e64-889d-ff4d9a839047)） | 高     | **是**                                                                                                | 订阅  |
| **应从订阅中删除弃用的帐户**                                       | 从订阅中删除已弃用的帐户，以便只允许当前用户访问。<br>（相关策略：应从订阅中删除弃用的帐户）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 高     | N                                                                                                    | 订阅  |
| **应从订阅中删除拥有所有者权限的已弃用帐户**                | 从订阅中删除拥有所有者权限的已弃用帐户。<br>（相关策略：应从订阅中删除拥有所有者权限的已弃用帐户）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 高     | N                                                                                                    | 订阅  |
| **应启用 Key Vault 的诊断日志**                                                     | 启用日志并将其保留长达一年。 这样便可以在发生安全事件或网络遭泄露时，重新创建活动线索用于调查目的。<br>（相关策略：应启用密钥保管库的诊断日志）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 低      | **是**                                                                                                | Key Vault     |
| **应从订阅中删除拥有所有者权限的外部帐户**                  | 从订阅中删除具有所有者特权的外部帐户，以防止发生未受监视的访问。<br>（相关策略：应从订阅中删除拥有所有者权限的外部帐户）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 高     | N                                                                                                    | 订阅  |
| **应从订阅中删除拥有读取权限的外部帐户**                   | 从订阅中删除具有读取特权的外部帐户，以防止发生未受监视的访问。<br>（相关策略：应从订阅中删除拥有读取权限的外部帐户）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 高     | N                                                                                                    | 订阅  |
| **应从订阅中删除具有写入权限的外部帐户**                  | 从订阅中删除具有写入特权的外部帐户，以防止发生未受监视的访问。<br>（相关策略：应从订阅中删除具有写入权限的外部帐户）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 高     | N                                                                                                    | 订阅  |
| **应在对订阅拥有所有者权限的帐户上启用 MFA**                      | 为具有所有者特权的所有订阅帐户启用多重身份验证 (MFA)，以防止破坏帐户或资源。<br>（相关策略：应在对订阅拥有所有者权限的帐户上启用 MFA）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 高     | N                                                                                                    | 订阅  |
| **应在对订阅拥有读取权限的帐户上启用 MFA**                       | 为具有读取特权的所有订阅帐户启用多重身份验证 (MFA)，以防止破坏帐户或资源。<br>（相关策略：应在对订阅拥有读取权限的帐户上启用 MFA）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 高     | N                                                                                                    | 订阅  |
| 应在对订阅拥有写入权限的帐户上启用 MFA                      | 为具有写入特权的所有订阅帐户启用多重身份验证 (MFA)，以防止破坏帐户或资源。<br>（相关策略：应在对订阅拥有写入权限的帐户上启用 MFA）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 高     | N                                                                                                    | 订阅  |
| 应使用服务主体（而不是管理证书）来保护你的订阅 | 通过管理证书，任何使用它们进行身份验证的人员都可管理与它们关联的订阅。 为了更安全地管理订阅，建议将服务主体和资源管理器结合使用来限制证书泄露所造成的影响范围。 这也可以使资源管理自动进行。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 中   | 否                                                                                                   | 订阅  |
| **应为订阅分配了多个所有者**                                  | 指定多个订阅所有者，以实现管理员访问权限冗余。<br>（相关策略：应向订阅分配多个所有者）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 高     | N                                                                                                    | 订阅  |
| **应在函数应用中使用托管标识**                                               | 若要增强身份验证安全性，请使用托管标识。<br>在 Azure 上，托管标识可为 Azure AD 中的 Azure 资源提供标识并用它来获取 Azure Active Directory (Azure AD) 令牌，从而使开发人员无需管理凭据。<br>（相关策略：[[预览]：应在函数应用中使用托管标识](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f0da106f2-4ca3-48e8-bc85-c638fe6aea8f)）                                                                                                                                                                                                                                                                                             | 中   | 否                                                                                                   | 应用服务   |
| **应在 Web 应用中使用托管标识**                                                    | 若要增强身份验证安全性，请使用托管标识。<br>在 Azure 上，托管标识可为 Azure AD 中的 Azure 资源提供标识并用它来获取 Azure Active Directory (Azure AD) 令牌，从而使开发人员无需管理凭据。<br>（相关策略：[[预览]：应在 Web 应用中使用托管标识](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f2b9ad585-36bc-4615-b300-fd4435808332)）                                                                                                                                                                                                                                                                                                  | 中   | 否                                                                                                   | 应用服务   |
|                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |          |                                                                                                      |               |




## <a name="deprecated-recommendations"></a>弃用的建议

| 建议                                                                                                                   | 说明及相关策略                                                                                                                                                                                                                                                                                                     | 严重性 | 已启用快速修复？（[了解详细信息](security-center-remediate-recommendations.md#quick-fix-remediation)） | 资源类型                  |
|----------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|------------------------------------------------------------------------------------------------------|--------------------------------|
| 应限制对应用服务的访问                                                                                  | 通过更改网络配置来限制对应用服务的访问，以拒绝来自过大范围的入站流量。<br>（相关策略：[预览]：应限制对应用服务的访问）                                                                                                               | 高     | N                                                                                                    | 应用服务                    |
| 应强化 IaaS NSG 上 Web 应用的规则                                                               | 如果运行 web 应用程序的虚拟机的网络安全组 (NSG) 所包含的 NSG 规则对于 web 应用程序端口而言过于宽松，应强化这些安全组。<br>（相关策略：应该强化 IaaS 上 Web 应用程序的 NSG 规则）                                                         | 高     | N                                                                                                    | 虚拟机                |
| 应定义 Pod 安全策略，通过删除不必要的应用程序特权来减少攻击途径。 | 通过删除不必要的应用程序特权，来定义 Pod 安全策略以减少攻击途径。 建议配置 pod 安全策略，以便 pod 只能访问其有权访问的资源。<br>（相关策略：[预览]：应在 Kubernetes 服务上定义 Pod 安全策略） | 中型   | N                                                                                                    | 计算资源（容器） |
| 安装适用于 IoT 的 Azure 安全中心安全模块，以更深入地了解 IoT 设备                           | 安装适用于 IoT 的 Azure 安全中心安全模块，以更深入地了解 IoT 设备。                                                                                                                                                                                                                              | 低      | N                                                                                                    | IoT 设备                     |
|                                                                                                                                  |                                                                                                                                                                                                                                                                                                                                  |          |


## <a name="next-steps"></a>后续步骤
若要详细了解建议，请参阅以下内容：

* [Azure 安全中心的安全建议](security-center-recommendations.md)
* [保护 Azure 安全中心中的网络](security-center-network-recommendations.md)