---
title: 使用 Azure 安全中心的集成漏洞评估扫描器 for SQL server
description: 了解有关计算机上的 SQL server 集成漏洞评估扫描器的 Azure Defender
author: memildin
ms.author: memildin
manager: rkarlin
ms.service: security-center
ms.topic: how-to
ms.date: 03/04/2021
ms.openlocfilehash: 5b610f98ea2bda5190464a881b750eed9f215857
ms.sourcegitcommit: 4b7a53cca4197db8166874831b9f93f716e38e30
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/04/2021
ms.locfileid: "102107332"
---
# <a name="using-the-integrated-vulnerability-assessment-scanner-for-your-sql-servers"></a>使用 SQL server 的集成漏洞评估扫描器

适用于计算机上的 SQL Server 的 Azure Defender 会扩展对 Azure 原生 SQL Server 的保护以完全支持混合环境，并保护在 Azure、其他云环境，甚至本地计算机上托管的 SQL server（所有受支持的版本）：
- [虚拟机上的 SQL Server](https://azure.microsoft.com/services/virtual-machines/sql-server/)
- 本地 SQL Server：
  - [已启用 Azure Arc 的 SQL Server（预览）](/sql/sql-server/azure-arc/overview)
  - [在不带 Azure Arc 的 Windows 计算机上运行的 SQL Server](../azure-monitor/agents/agent-windows.md)

集成 [漏洞评估扫描程序](../azure-sql/database/sql-vulnerability-assessment.md) 发现、跟踪并帮助您修正潜在的数据库漏洞。 评估扫描结果概述了 SQL 计算机的安全状态以及任何安全发现的详细信息。

## <a name="explore-vulnerability-assessment-reports"></a>浏览漏洞评估报告

漏洞评估服务每周扫描一次数据库。 扫描在启用服务的一周中的同一天运行。

漏洞评估仪表板概述了所有数据库中的评估结果，以及正常和不正常的数据库的摘要，以及根据风险分布的失败检查的总体摘要。

可以直接在安全中心查看漏洞评估结果。

1. 从安全中心边栏打开 " **建议** " 页。

1. 选择计算机上的 **SQL server 上的建议漏洞评估结果应 (预览) 进行修正**。 有关详细信息，请参阅 [安全中心建议参考页](security-center-recommendations.md)。 

    :::image type="content" source="./media/security-center-advanced-iaas-data/data-and-storage-sqldb-vulns-on-vm.png" alt-text="计算机上的 SQL server 上的漏洞评估结果应 (预览版进行修正) ":::

    此时显示此建议的详细视图。

    :::image type="content" source="./media/defender-for-sql-on-machines-vulnerability-assessment/sql-vulnerability-findings.png" alt-text="建议的详细视图":::

1. 有关更多详细信息，请向下钻取：

    - 若要大致了解 (数据库的已扫描资源) 以及经过测试的安全检查列表，请打开 **受影响的资源** 并选择感兴趣的服务器。

    - 若要大致了解按特定 SQL 数据库分组的漏洞，请选择相关数据库。

    在每个视图中，安全检查按照严重性排序。 选择特定的安全检查，查看详细信息窗格，其中包含 **说明**、 **修正** 方式和其他相关信息（如 **影响** 或 **基准**）。

## <a name="view-vulnerabilities-in-graphical-interactive-reports"></a>以图形、交互式报表查看漏洞

安全中心的集成 Azure Monitor 工作簿库包括一份交互式报告，其中包含计算机的漏洞扫描程序、容器注册表中的容器和 SQL server 中的所有发现。

每个扫描程序的结果报告在单独的建议中：

- 应修正虚拟机中的漏洞
- 应修正 Azure 容器注册表映像中的漏洞（由 Qualys 提供技术支持）
- 应修正关于 SQL 数据库的漏洞评估结果
- 应修正关于计算机上 SQL 服务器的漏洞评估结果

"漏洞评估结果" 报表收集所有这些发现结果，并按严重性、资源类型和类别对其进行组织。 可以从安全中心的边栏中的 "工作簿" 库中找到该报表。

:::image type="content" source="media/defender-for-sql-on-machines-vulnerability-assessment/vulnerability-assessment-findings-report-sql.png" alt-text="安全中心的漏洞评估结果报表":::


## <a name="disable-specific-findings-preview"></a> (预览禁用特定发现) 

如果组织需要忽略发现结果，而不是修正漏洞，则可以选择禁用发现结果。 禁用发现结果不会影响安全分数，也不会产生有害的噪音。

当发现结果与在禁用规则中定义的条件相匹配时，它不会显示在发现结果列表中。 典型方案包括：

- 禁用严重性低于中型的发现结果
- 禁用非可修补的结果
- 禁用对定义的作用域不感兴趣的基准的结果

> [!IMPORTANT]
> 若要创建规则，需要在 Azure 策略中编辑策略的权限。 有关详细信息，请参阅 azure [策略中的 AZURE RBAC 权限](../governance/policy/overview.md#azure-rbac-permissions-in-azure-policy)。

若要创建规则，请执行以下操作：

1. 在 "建议" 详细信息页中，对于 **计算机上的 SQL server 上的漏洞评估结果**，请选择 " **禁用规则**"。

1. 选择相关范围。

1. 定义条件。 您可以使用下列任一条件： 
    - 查找 ID 
    - 严重性 
    - 基准 

    :::image type="content" source="./media/defender-for-sql-on-machines-vulnerability-assessment/disable-rule-vulnerability-findings-sql.png" alt-text="为计算机上的 SQL server 上的 VA 发现创建禁用规则":::

1. 选择 " **应用规则**"。 更改可能需要24小时才能生效。

1. 查看、替代或删除规则： 

    1. 选择 " **禁用规则**"。

    1. 在 "作用域" 列表中，具有活动规则的订阅显示为 "已 **应用规则**"。

        :::image type="content" source="./media/remediate-vulnerability-findings-vm/modify-rule.png" alt-text="修改或删除现有规则":::

    1. 若要查看或删除规则，请选择省略号菜单 ( "..." ) 。

## <a name="next-steps"></a>后续步骤

了解有关安全中心的 SQL 资源保护的详细信息，请参阅 [适用于 sql 的 Azure Defender](defender-for-sql-introduction.md)。