---
title: 在 Azure IoT Central 应用程序中分析设备数据 | Microsoft Docs
description: 在 Azure IoT Central 应用程序中分析设备数据。
author: ankitscribbles
ms.author: ankitgup
ms.date: 11/27/2019
ms.topic: how-to
ms.service: iot-central
services: iot-central
manager: abjork
ms.openlocfilehash: 6a144f674f95317f425fd8ba2eb9dda730ed3e28
ms.sourcegitcommit: 02d443532c4d2e9e449025908a05fb9c84eba039
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/06/2021
ms.locfileid: "108750124"
---
# <a name="how-to-use-analytics-to-analyze-device-data"></a>如何使用分析功能来分析设备数据

Azure IoT Central 提供丰富的分析功能用于分析历史趋势以及关联设备中的各个遥测项。 若要开始，请访问左侧窗格中的“Analytics”。

## <a name="understanding-the-analytics-ui"></a>了解 Analytics UI
Analytics 用户界面由三个主要组件构成：
- 数据配置面板：在配置面板上，首先选择要分析数据的设备组。 接下来选择要分析的遥测项，并为每个遥测项选择聚合方法。 “拆分依据”控件有助于使用设备属性作为维度来分组数据。

- 时间控件：时间控件用于选择要分析数据的持续时间。 可以拖动时间滑块的任何一端来选择时间跨度。 时间控件还附带了“间隔大小”滑块，该滑块控制用于聚合数据的桶或间隔大小。 

- 图表控件：图表控件将数据可视化为折线图。 可以通过与图表图例交互来切换特定线条的可见性。 


  ![Analytics UI 概述](media/howto-create-analytics/analyticsui.png)


## <a name="querying-your-data"></a>查询数据

需要首先选择一个 **设备组** 以及要分析的遥测项。 完成后，选择“分析”开始可视化数据。

- 设备组：[设备组](tutorial-use-device-groups.md)是用户定义的设备组。 例如，奥克兰市的所有冷冻机，或所有版本 2.0 的风力涡轮机。

- 遥测：选择要分析和探索的遥测。 可以选择多个遥测项一起进行分析。 对于数字和字符串数据类型，默认聚合方法分别设置为“平均”和“计数”。 数字数据类型支持的聚合方法为“平均”、“最大值”、“最小值”、“计数”和“总和”。  字符串数据类型支持的聚合方法为“计数”。

- 拆分依据：“拆分依据”控件有助于使用设备属性作为维度来分组数据。 设备发送遥测数据时，设备和云属性的值将与这些遥测数据联接在一起。 如果云或设备属性已更新，图表上会显示按不同的值分组的遥测项。

    > [!TIP]
    > 若要单独查看每个设备的数据，请在“拆分依据”控件中选择“设备 ID”。

## <a name="interacting-with-your-data"></a>与数据交互

查询数据后，可以开始在折线图上将其可视化。 可以在数据网格中显示/隐藏遥测项、更改持续时间和查看遥测项。

- 时间编辑器面板：默认检索过去某一天的数据。 可以拖动时间滑块的任何一端来更改持续时间。 还可以使用日历控件选择某个预定义的时间桶，或选择自定义时间范围。 时间控件还附带了“间隔大小”滑块，该滑块控制用于聚合数据的桶或间隔大小。

    ![时间编辑器](media/howto-create-analytics/timeeditorpanel.png)

    - 内部日期范围滑块工具：通过拖动两个端点控件来使用它们选择所需的时间跨度。 此内部日期范围内受外部日期范围滑块控件约束。
    
   
    - 外部数据范围滑块控件：使用终结点控件选择可用于内部日期范围控件的外部日期范围。

    - 增加和减少日期范围按钮：通过选择任一按钮来增加或减少时间跨度，从而获得所需间隔。

    - 间隔大小滑块：使用它来放大和缩小同一时间跨度的间隔。 通过此操作可更精确地控制较大时间片段之间的移动。 可以使用该控件查看数据的高分辨率精细视图（精度可达毫秒）。 滑块的默认起点设置为所选数据的最佳视图，可平衡分辨率、查询速度和粒度。
    
    - 日期范围选取器：通过此 Web 控件，可以轻松地选择所需的日期和时间范围。 还可以使用该控件在不同时区之间切换。 对当前工作区进行更改之后，选择“保存”。

    > [!TIP]
    > 间隔大小根据所选时间跨度动态确定。 指定较小的时间跨度可将数据聚合到最长几秒钟的极精细间隔。


- 图表图例：图表图例在图表上显示所选的遥测。 将鼠标悬停在图例中的每个项之上可以在图表中将焦点置于该项上。 使用“拆分依据”时，遥测项将按所选维度的相应值进行分组。 可以单击组名称来切换每个特定遥测项或整个组的可见性。  


- **Y 轴格式控件：** Y 轴模式循环切换可用的 Y 轴视图选项。 仅当可视化不同的遥测项时，此控件才可用。 可以通过选择以下三种模式之一来设置 Y 轴：

    - 堆积：每个遥测的图都是堆积图，每个图都有自己的 y-轴。 默认设置此模式。
    - 共享：每个遥测的图都以相同的 y-轴绘制。
    - 重叠：使用它可以在同一个 y-轴上堆叠多个行，y-轴数据会根据所选的行进行更改。

  ![使用不同的可视化模式在 Y 轴上排列数据](media/howto-create-analytics/yaxiscontrol.png)

- 缩放控件：使用缩放控件，可以进一步钻取数据。 如果你在结果集中发现了一个想要重点关注的时间段，请使用鼠标指针抓取相应区域，并将其拖到所选的终结点。 然后右键单击所选区域并单击“缩放”。

  ![放大数据](media/howto-create-analytics/zoom.png)

省略号图标下面提供了用于与数据交互的其他图表控件：

- 显示网格：结果以表格格式显示，这样就可以查看每个数据点的特定值。

- 下载为 CSV：结果可以导出为逗号分隔值 (CSV) 文件。 CSV 文件包含每个设备的数据。 结果是使用指定的间隔和期限导出。 

- 放置标记：“放置标记”控件提供了一种方法来定位图表上的某些数据点。 当你尝试跨不同的时间段比较多个线条的数据时，此控件非常有用。

  ![显示分析数据的网格视图](media/howto-create-analytics/additionalchartcontrols.png)
