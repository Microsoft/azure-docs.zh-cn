---
title: IoT 即插即用认证要求
description: IoT 即插即用认证计划要求
author: cbroad
ms.author: cbroad
ms.topic: conceptual
ms.date: 03/15/2021
ms.custom: IoT Plug and Play Certification Requirements
ms.service: certification
ms.openlocfilehash: bbe9a3f18463285521dde0ee64b369cffcd71d75
ms.sourcegitcommit: f5448fe5b24c67e24aea769e1ab438a465dfe037
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/30/2021
ms.locfileid: "105975637"
---
# <a name="iot-plug-and-play-certification-requirements"></a>IoT 即插即用认证要求

本文档概述了将在 Azure IoT 设备目录中呈现的特定于设备的功能。 功能是一个设备属性，可以是软件实现，也可以是软件和硬件实现的组合。

## <a name="program-purpose"></a>计划的目的

通过 IoT 即插即用预览版，解决方案构建者无需任何手动配置即可将智能设备集成到解决方案中。 IoT 即插即用的核心是设备模型，设备通过设备模型将其功能告知支持 IoT 即插即用的应用程序。 该模型由一组元素构成：遥测、属性和命令。

IoT 即插即用认证的承诺包括以下内容：

1.  定义的设备模型和接口符合[数字孪生定义语言](https://github.com/Azure/opendigitaltwins-dtdl)  
2.  在设备预配服务中保护 ID 范围所有权的预配和轻松传输
3.  使用[数字孪生 API](../iot-pnp/concepts-digital-twin.md) 轻松与基于 Azure IoT 的解决方案集成：Azure IoT 中心和 Azure IoT Central
4.  经过验证的产品在认证设备上真实可靠

## <a name="requirements"></a>要求

**[必需]设备到云：测试的目的是确保发送遥测的设备可与 IoT 中心配合使用**

| **名称**                | IoTPnP.D2C                                               |
| ----------------------- | ------------------------------------------------------------ |
| **目标可用性** | 目前可用                                                |
| **适用于**          | 叶设备/边缘设备                                      |
| **OS**                  | 不可知                                                     |
| **验证类型**     | 自动                                                    |
| **验证**          | 设备必须将任何遥测架构发送到 IoT 中心。 Microsoft 提供了[门户工作流](https://certify.azure.com)来执行这些测试。 设备到云（必需）：**1.** 验证设备是否可以将消息发送到 AICS 托管 IoT 中心 **2.** 用户必须指定消息的数量和频率。 **3.** AICS 验证由中心实例接收的遥测 |
| **资源**           | [认证步骤](./overview.md)（具有所有附加资源） |

**[必需] DPS：测试的目的是通过三种证明方法中的一种来检查设备是否实现并支持 IoT 中心设备预配服务**

| **名称**                | IoTPnP.DPS                                               |
| ----------------------- | ------------------------------------------------------------ |
| **目标可用性** | 目前可用                                                |
| **适用于**          | 任何设备                                                   |
| **OS**                  | 不可知                                                     |
| **验证类型**     | 自动                                                    |
| **验证**          | 设备必须实现 DPS ID 范围所有权的轻松传输，而无需重新编译嵌入代码。 Microsoft 提供了 [门户工作流](https://certify.azure.com)来执行这些测试，以验证设备是否支持 DPS **1.** 用户必须选择一种证明方法（X.509、TPM 和 SAS 密钥）**2.** 根据证明方法，用户需要执行相应的操作（例如 a) 将 X.509 证书上传到 AICS 托管的 DPS 范围；b) 在设备中实现 SAS 密钥或认可密钥）  |
| **资源**           | **a)** [设备预配服务概述](../iot-dps/about-iot-dps.md)，**b)** [用于 DPS ID 范围传送的示例配置文件](https://github.com/Azure/azure-iot-sdk-c/tree/public-preview-pnp/digitaltwin_client/samples/digitaltwin_sample_ll_device/sample_config) |

**[必需] DTDL v2：测试目的是确保定义的设备模型和接口符合数字孪生定义语言 v2。**                                                              

| **名称**                | IoTPnP.DTDL                                                  |
| ----------------------- | ------------------------------------------------------------ |
| **目标可用性** | 目前可用                                                |
| **适用于**          | 任何设备                                                   |
| **OS**                  | 不可知                                                     |
| **验证类型**     | 自动                                                    |
| **验证**          | [门户工作流](https://certify.azure.com)验证：**1.** 模型 ID 公告，并确保使用 MQTT 或基于 WebSocket 的 MQTT 协议连接设备 **2.** 模型符合 DTDL v2 **3.** 遥测、属性和命令已在设备上正确实现，并在 IoT 中心的数字孪生和设备孪生之间进行交互 |
| **资源**           | [公共预览版刷新更新](../iot-pnp/overview-iot-plug-and-play-preview-updates.md) |

**[必需]设备模型在公共模型存储库中发布**

| **名称**                | IoTPnP.ModelRepo                                             |
| ----------------------- | ------------------------------------------------------------ |
| **目标可用性** | 目前可用                                                |
| **适用于**          | 任何设备                                                   |
| **OS**                  | 不可知                                                     |
| **验证类型**     | 自动                                                    |
| **验证**          | 所有设备模型都必须在公共存储库中发布。 通过公共存储库中提供的模型来解析设备模型 **1.** 用户必须先手动将模型发布到公共存储库，然后才能提交认证。 **2.** 请注意，模型一旦发布，将不可改变。 强烈建议仅在完成了模型和嵌入式设备代码后再发布。*1  *1 将模型发布到模型存储库后，如果要撤销模型，用户必须联系 Microsoft 支持部门 **3.** 当设备连接到认证服务时，[门户工作流](https://certify.azure.com)将检查公共存储库中是否存在模型 |
| **资源**           | [模型存储库](../iot-pnp/overview-iot-plug-and-play-preview-updates.md) |

**[必需]使用 GSG 进行物理设备验证**

| **名称**                                  | IoTPnP.Physicaldevice                                      |
| ----------------------------------------- | ------------------------------------------------------------ |
| **目标可用性**                   | 目前可用                                                |
| **适用于**                            | 任何设备                                                   |
| **OS**                                    | 不可知                                                     |
| **验证类型**                       | 手动                                                       |
| **验证**                            | 要安排在物理设备上执行其他验证，合作伙伴必须与 Microsoft 联系人 ([iotcert@microsoft.com](mailto:iotcert@microsoft.com)) 联系。 由于新冠肺炎疫情的影响，我们正在探索多种方法来执行物理设备验证，而无需将设备寄送给 Microsoft。 |
| **资源**                             | 稍后将提供详细信息                                 |
| **Azure 建议**       | 不适用    |

**[如果已实现]设备信息接口：测试的目的是验证设备代码中是否已正确实现设备信息接口**

| **名称**                | IoTPnP.DeviceInfoInterface                                   |
| ----------------------- | ------------------------------------------------------------ |
| **目标可用性** | 目前可用                                                |
| **适用于**          | 任何设备                                                   |
| **OS**                  | 不可知                                                     |
| **验证类型**     | 自动                                                    |
| **验证**          | [门户工作流](https://certify.azure.com)验证设备代码是否实现 [设备信息接口](https://repo.azureiotrepository.com/Models/dtmi:azure:DeviceManagement:DeviceInformation;1?api-version=2020-05-01-previewureiot:DeviceManagement:DeviceInformation:1) **1.** 检查值是否由设备代码发送到 IoT 中心 **2.** 检查接口是否已在 DCM 中实现（此实现将在 DTDL v2 中更改）**3.** 检查属性是否为不可写（只读）**4.** 检查架构类型是否为字符串和/或 long 且不为 null |
| **资源**           | [Microsoft 定义的接口](../iot-pnp/overview-iot-plug-and-play-preview-updates.md) |
| **Azure 建议**  | 不适用                                                          |

**[如果已实现]云到设备：测试的目的是确保可以将消息从云发送到设备**

| **名称**                | IoTPnP.C2D                                               |
| ----------------------- | ------------------------------------------------------------ |
| **目标可用性** | 目前可用                                                |
| **适用于**          | 叶设备/边缘设备                                      |
| **OS**                  | 不可知                                                     |
| **验证类型**     | 自动                                                    |
| **验证**          | 设备必须能够从 IoT 中心向云到设备发送消息。 Microsoft 提供了[门户工作流](https://certify.azure.com)来执行这些测试。 云到设备（如果已实现）：**1.** 验证设备是否可以从 IoT 中心接收消息 **2.** AICS 发送随机消息，并通过来自设备的消息 ACK 进行验证 |
| **资源**           | **1.** [认证步骤](./overview.md)（具有所有附加资源），**2.** [从 IoT 中心发送云到设备消息](../iot-hub/iot-hub-devguide-messages-c2d.md) |

**[如果已实现]直接方法：测试的目的是确保设备可与 IoT 中心配合使用并支持直接方法**

| **名称**                | IoTPnP.DirectMethods                                     |
| ----------------------- | ------------------------------------------------------------ |
| **目标可用性** | 目前可用                                                |
| **适用于**          | 叶设备/边缘设备                                      |
| **OS**                  | 不可知                                                     |
| **验证类型**     | 自动                                                    |
| **验证**          | 设备必须能够接收来自 IoT 中心的命令请求并进行回复。 Microsoft 提供了[门户工作流](https://certify.azure.com)来执行这些测试。 直接方法（如果已实现）**1.** 用户必须指定直接方法的方法有效负载。 **2.** AICS 验证从中心发送的指定有效负载请求和设备接收到的 ACK 消息 |
| **资源**           | **1.** [认证步骤](./overview.md)（具有所有附加资源），**2.** [了解 IoT 中心的直接方法](../iot-hub/iot-hub-devguide-direct-methods.md) |

**[如果已实现]设备孪生属性：测试的目的是确保发送遥测的设备可与 IoT 中心配合使用，并支持某些 IoT 中心功能，如直接方法和设备孪生属性**

| **名称**                | IoTPnP.DeviceTwin                                        |
| ----------------------- | ------------------------------------------------------------ |
| **目标可用性** | 目前可用                                                |
| **适用于**          | 叶设备/边缘设备                                      |
| **OS**                  | 不可知                                                     |
| **验证类型**     | 自动                                                    |
| **验证**          | 设备必须将任何遥测架构发送到 IoT 中心。 Microsoft 提供了[门户工作流](https://certify.azure.com)来执行这些测试。 设备孪生属性（如果已实现）**1.** AICS 验证设备孪生 JSON 中的读/写属性 **2.** 用户必须指定要更改的 JSON 有效负载 **3.** AICS 验证从 IoT 中心发送的指定必需属性和设备收到的 ACK 消息 |
| **资源**           | **1.** [认证步骤](./overview.md)（具有所有附加资源），**2.** [将设备孪生与 IoT 中心配合使用](../iot-hub/iot-hub-devguide-device-twins.md) |